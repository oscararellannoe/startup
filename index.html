<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Life Organizer – Organiza dinero, tiempo y hábitos con IA</title>
    <meta
      name="description"
      content="Genera un plan personalizado que alinea tus finanzas, hábitos y agenda en minutos con AI Life Organizer."
    />
    <meta name="robots" content="index,follow" />
    <meta property="og:title" content="AI Life Organizer – Organiza dinero, tiempo y hábitos con IA" />
    <meta
      property="og:description"
      content="Crea un plan completo que ordena tu dinero, horarios y hábitos en minutos con inteligencia artificial."
    />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://ailifeorganizer.com" />
    <meta property="og:image" content="https://ailifeorganizer.com/preview.png" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="AI Life Organizer – Organiza dinero, tiempo y hábitos con IA" />
    <meta
      name="twitter:description"
      content="Crea un plan completo que ordena tu dinero, horarios y hábitos en minutos con inteligencia artificial."
    />
    <meta name="twitter:image" content="https://ailifeorganizer.com/preview.png" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "AI Life Organizer",
        "description": "Herramienta web que organiza dinero, tiempo y hábitos con inteligencia artificial",
        "applicationCategory": "ProductivityApplication",
        "operatingSystem": "Web",
        "offers": {
          "@type": "Offer",
          "price": "9.00",
          "priceCurrency": "USD"
        }
      }
    </script>
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
          {
            "@type": "Question",
            "name": "¿Necesito datos exactos para generar un plan?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "No. Con aproximaciones de ingresos, gastos y horarios la IA puede armar recomendaciones útiles que luego podrás ajustar."
            }
          },
          {
            "@type": "Question",
            "name": "¿Dónde se guardan mis planes?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Tus planes se guardan en tu navegador y, si inicias sesión, se sincronizan en la nube privada de Supabase para que solo tú puedas acceder."
            }
          },
          {
            "@type": "Question",
            "name": "¿Puedo actualizar el plan cuando cambie mi vida?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Sí. Puedes editar los campos y generar nuevos planes ilimitadas veces cuando cambien tus prioridades."
            }
          }
        ]
      }
    </script>
    <style>
      body {
        font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      }
      body.modal-open {
        overflow: hidden;
      }
    </style>
  </head>
  <body class="bg-[#030712] text-slate-200">
    <div class="relative">
      <header class="sticky top-0 z-30 border-b border-white/5 bg-[#030712]/90 backdrop-blur">
        <div class="mx-auto flex max-w-6xl items-center justify-between px-4 py-4 sm:px-6 lg:px-8">
          <a href="#inicio" class="text-lg font-semibold text-white">AI Life Organizer</a>
          <nav class="hidden items-center gap-6 text-sm text-slate-300 md:flex">
            <a class="nav-link hover:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500" href="#como">Cómo funciona</a>
            <a class="nav-link hover:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500" href="#beneficios">Beneficios</a>
            <a class="nav-link hover:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500" href="#app">App</a>
            <a class="nav-link hover:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500" href="#planes">Planes</a>
            <a class="nav-link hover:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500" href="#faq">FAQ</a>
          </nav>
          <div class="flex items-center gap-3">
            <div class="hidden flex-col text-right text-xs text-slate-300 sm:flex" id="authUserBadge">
              <span class="text-[11px] uppercase tracking-[0.2em] text-slate-500">Sesión activa</span>
              <span class="font-medium text-white">Sesión: <span id="authEmailDisplay"></span></span>
            </div>
            <button
              id="loginTrigger"
              type="button"
              aria-haspopup="dialog"
              class="inline-flex items-center justify-center rounded-full border border-white/15 bg-white/5 px-4 py-2 text-sm text-slate-200 transition hover:bg-white/10"
            >Iniciar sesión</button>
            <button
              id="signupTrigger"
              type="button"
              class="inline-flex items-center justify-center rounded-full border border-indigo-500/40 bg-indigo-500/10 px-4 py-2 text-sm text-indigo-200 transition hover:bg-indigo-500/20"
            >Crear cuenta</button>
            <button
              id="logoutButton"
              type="button"
              class="hidden inline-flex items-center justify-center rounded-full border border-white/15 bg-white/5 px-4 py-2 text-sm text-slate-200 transition hover:bg-white/10"
            >Cerrar sesión</button>
            <button
              id="mobile-menu-button"
              class="inline-flex items-center justify-center rounded-full border border-white/15 bg-white/5 p-2 text-slate-200 transition hover:bg-white/10 md:hidden"
              aria-label="Abrir menú de navegación"
              aria-expanded="false"
              aria-controls="mobile-menu"
            >
              <svg class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
              </svg>
            </button>
          </div>
        </div>
        <div id="mobile-menu" class="hidden border-t border-white/5 bg-[#050816] md:hidden" role="menu">
          <div class="space-y-1 px-4 py-4 text-sm">
            <a class="nav-link block rounded-lg px-3 py-2 text-slate-300 hover:bg-white/5 focus:outline-none focus:ring-2 focus:ring-indigo-500" href="#como">Cómo funciona</a>
            <a class="nav-link block rounded-lg px-3 py-2 text-slate-300 hover:bg-white/5 focus:outline-none focus:ring-2 focus:ring-indigo-500" href="#beneficios">Beneficios</a>
            <a class="nav-link block rounded-lg px-3 py-2 text-slate-300 hover:bg-white/5 focus:outline-none focus:ring-2 focus:ring-indigo-500" href="#app">App</a>
            <a class="nav-link block rounded-lg px-3 py-2 text-slate-300 hover:bg-white/5 focus:outline-none focus:ring-2 focus:ring-indigo-500" href="#planes">Planes</a>
            <a class="nav-link block rounded-lg px-3 py-2 text-slate-300 hover:bg-white/5 focus:outline-none focus:ring-2 focus:ring-indigo-500" href="#faq">FAQ</a>
          </div>
        </div>
      </header>

      <main id="inicio" class="space-y-24 py-16">
        <!-- Hero -->
        <section class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
          <div class="grid gap-10 lg:grid-cols-2 lg:items-center">
            <div class="space-y-6">
              <p class="text-sm font-semibold uppercase tracking-[0.2em] text-indigo-300">Organiza tu vida en minutos</p>
              <h1 class="text-4xl font-semibold text-white sm:text-5xl">
                Dinero, tiempo y hábitos en un panel inteligente
              </h1>
              <p class="text-base text-slate-400">
                AI Life Organizer transforma números sueltos y rutinas caóticas en un plan accionable con bloques de tiempo, hábitos clave y prioridades semanales.
              </p>
              <div class="flex flex-wrap gap-3">
                <a
                  href="#app"
                  class="inline-flex items-center justify-center rounded-full bg-indigo-500 px-5 py-2.5 text-sm font-medium text-white shadow-lg shadow-indigo-500/30 transition hover:scale-[1.02] hover:bg-indigo-400 active:scale-[0.98]"
                >Generar mi plan</a>
                <a
                  href="#planes"
                  class="inline-flex items-center justify-center rounded-full border border-white/15 bg-white/5 px-4 py-2 text-sm text-slate-200 transition hover:bg-white/10"
                >Ver planes</a>
              </div>
              <div class="flex flex-wrap gap-6 text-sm text-slate-400">
                <div>
                  <p class="text-2xl font-semibold text-white">+4,700</p>
                  <p>Planes generados</p>
                </div>
                <div>
                  <p class="text-2xl font-semibold text-white">12 min</p>
                  <p>Promedio para comenzar</p>
                </div>
                <div>
                  <p class="text-2xl font-semibold text-white">24/7</p>
                  <p>Disponible donde estés</p>
                </div>
              </div>
            </div>
            <div class="rounded-3xl border border-white/10 bg-gradient-to-br from-indigo-500/10 via-sky-500/10 to-emerald-500/10 p-6">
              <div class="rounded-2xl border border-white/10 bg-[#050816] p-6">
                <p class="text-sm uppercase tracking-[0.3em] text-indigo-300">Vista previa</p>
                <h3 class="mt-3 text-2xl font-semibold text-white">Panel de claridad</h3>
                <p class="mt-2 text-sm text-slate-400">
                  Resultados accionables con distribución de ingresos, hábitos clave y bloques de tiempo listos para usar.
                </p>
                <div class="mt-6 space-y-4 text-sm">
                  <div class="rounded-2xl border border-white/10 bg-white/5 p-4">
                    <p class="text-xs text-slate-400">Resumen financiero</p>
                    <p class="text-base text-white">Ahorra 18% del ingreso reorganizando gasto variable.</p>
                  </div>
                  <div class="rounded-2xl border border-white/10 bg-white/5 p-4">
                    <p class="text-xs text-slate-400">Bloques de tiempo</p>
                    <p class="text-base text-white">Planifica mañanas creativas y tardes de ejecución.</p>
                  </div>
                  <div class="rounded-2xl border border-white/10 bg-white/5 p-4">
                    <p class="text-xs text-slate-400">Hábitos clave</p>
                    <p class="text-base text-white">Rutinas mínimas para estirar energía durante la semana.</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Cómo funciona -->
        <section id="como" class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
          <div class="space-y-3 text-center">
            <p class="text-sm font-semibold text-indigo-300">Proceso simple</p>
            <h2 class="text-3xl font-semibold text-white">Cómo funciona AI Life Organizer</h2>
            <p class="text-base text-slate-400">Solo tres pasos para recuperar claridad mental.</p>
          </div>
          <div class="mt-12 grid gap-6 sm:grid-cols-3">
            <div class="rounded-3xl border border-white/10 bg-[#050816] p-6">
              <div class="mb-4 inline-flex h-11 w-11 items-center justify-center rounded-2xl bg-white/5 text-sm font-semibold text-white">1</div>
              <h3 class="text-lg font-medium text-white">Cuéntanos tu contexto</h3>
              <p class="mt-2 text-sm text-slate-400">Ingresos, gastos, metas, tiempo disponible y nivel de caos actual.</p>
            </div>
            <div class="rounded-3xl border border-white/10 bg-[#050816] p-6">
              <div class="mb-4 inline-flex h-11 w-11 items-center justify-center rounded-2xl bg-white/5 text-sm font-semibold text-white">2</div>
              <h3 class="text-lg font-medium text-white">La IA arma tu plan</h3>
              <p class="mt-2 text-sm text-slate-400">Ordena dinero, hábitos y bloques de tiempo con lógica clara.</p>
            </div>
            <div class="rounded-3xl border border-white/10 bg-[#050816] p-6">
              <div class="mb-4 inline-flex h-11 w-11 items-center justify-center rounded-2xl bg-white/5 text-sm font-semibold text-white">3</div>
              <h3 class="text-lg font-medium text-white">Aplica y ajusta</h3>
              <p class="mt-2 text-sm text-slate-400">Repite el proceso cuando cambien tus prioridades.</p>
            </div>
          </div>
        </section>

        <!-- Beneficios -->
        <section id="beneficios" class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
          <div class="space-y-3 text-center">
            <p class="text-sm font-semibold text-indigo-300">Para personas reales</p>
            <h2 class="text-3xl font-semibold text-white">Beneficios inmediatos</h2>
            <p class="text-base text-slate-400">Centraliza dinero, energía y horarios en un tablero accionable.</p>
          </div>
          <div class="mt-12 grid gap-6 sm:grid-cols-2">
            <article class="rounded-3xl border border-white/10 bg-[#050816] p-6">
              <h3 class="text-lg font-semibold text-white">Unifica información crítica</h3>
              <p class="mt-2 text-sm text-slate-400">Finanzas, metas y hábitos conviven para que decidas rápido.</p>
            </article>
            <article class="rounded-3xl border border-white/10 bg-[#050816] p-6">
              <h3 class="text-lg font-semibold text-white">Lenguaje claro en español</h3>
              <p class="mt-2 text-sm text-slate-400">Sin tecnicismos, solo acciones que puedes ejecutar hoy.</p>
            </article>
            <article class="rounded-3xl border border-white/10 bg-[#050816] p-6">
              <h3 class="text-lg font-semibold text-white">Recomendaciones vivas</h3>
              <p class="mt-2 text-sm text-slate-400">Genera nuevos planes cuando cambie tu vida o tus números.</p>
            </article>
            <article class="rounded-3xl border border-white/10 bg-[#050816] p-6">
              <h3 class="text-lg font-semibold text-white">Modo a prueba de caos</h3>
              <p class="mt-2 text-sm text-slate-400">Detecta cuellos de botella y sugiere descansos y bloques realistas.</p>
            </article>
          </div>
        </section>

        <!-- App -->
        <section id="app" class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
          <div class="space-y-3 text-center">
            <p class="text-sm font-semibold text-indigo-300">Tu tablero personal</p>
            <h2 class="text-3xl font-semibold text-white">Crea un plan en 3 minutos</h2>
            <p class="text-base text-slate-400">Completa los campos una vez, guarda múltiples planes y vuelve cuando quieras.</p>
          </div>
          <div class="mt-10 grid gap-8 lg:grid-cols-2">
            <div>
              <div class="mb-5 flex flex-wrap gap-2">
                <button
                  type="button"
                  class="template-chip inline-flex items-center rounded-full bg-white/5 px-3 py-1 text-xs text-slate-200 transition hover:bg-white/10"
                  data-ingresos="2800"
                  data-gastos="2100"
                  data-metas="Ahorrar para actividades escolares, cocinar saludable 3 veces por semana, tener tiempo de lectura personal"
                  data-horario="30 minutos temprano, 1 hora a la hora de la siesta, bloques cortos fines de semana"
                  data-area="Tiempo"
                  data-caos="Mi agenda es impredecible pero quiero orden"
                >Plantilla mamá ocupada</button>
                <button
                  type="button"
                  class="template-chip inline-flex items-center rounded-full bg-white/5 px-3 py-1 text-xs text-slate-200 transition hover:bg-white/10"
                  data-ingresos="6500"
                  data-gastos="4300"
                  data-metas="Escalar ventas mensuales, cuidar salud, reservar tardes para networking"
                  data-horario="Bloques de enfoque 7-10am, reuniones flexibles tarde, revisión estratégica domingo"
                  data-area="Dinero"
                  data-caos="Vivo apagando incendios cada semana"
                >Plantilla emprendedor</button>
                <button
                  type="button"
                  class="template-chip inline-flex items-center rounded-full bg-white/5 px-3 py-1 text-xs text-slate-200 transition hover:bg-white/10"
                  data-ingresos="1200"
                  data-gastos="900"
                  data-metas="Terminar tesis, entregar proyectos freelance, cuidar sueño"
                  data-horario="Mañanas libres martes y jueves, noches productivas, fines de semana parciales"
                  data-area="Hábitos"
                  data-caos="Me cuesta mantener una rutina estable"
                >Plantilla estudiante</button>
              </div>
              <form id="lifeForm" class="space-y-5 rounded-3xl border border-white/10 bg-[#050816] p-6">
                <div>
                  <label for="ingresos" class="text-sm text-slate-300">Ingresos mensuales estimados</label>
                  <input
                    id="ingresos"
                    type="number"
                    inputmode="decimal"
                    class="mt-2 w-full rounded-2xl border border-white/10 bg-transparent px-4 py-2 text-white focus:border-indigo-400 focus:outline-none"
                    placeholder="Ej. 3500"
                    required
                  />
                </div>
                <div>
                  <label for="gastos" class="text-sm text-slate-300">Gastos mensuales principales</label>
                  <input
                    id="gastos"
                    type="number"
                    inputmode="decimal"
                    class="mt-2 w-full rounded-2xl border border-white/10 bg-transparent px-4 py-2 text-white focus:border-indigo-400 focus:outline-none"
                    placeholder="Ej. 2400"
                    required
                  />
                </div>
                <div>
                  <label for="metas" class="text-sm text-slate-300">Metas prioritarias</label>
                  <textarea
                    id="metas"
                    rows="3"
                    class="mt-2 w-full rounded-2xl border border-white/10 bg-transparent px-4 py-2 text-white focus:border-indigo-400 focus:outline-none"
                    placeholder="Describe tus metas financieras, de salud o familia"
                  ></textarea>
                </div>
                <div>
                  <label for="horarioDisponible" class="text-sm text-slate-300">Horario disponible y compromisos</label>
                  <textarea
                    id="horarioDisponible"
                    rows="3"
                    class="mt-2 w-full rounded-2xl border border-white/10 bg-transparent px-4 py-2 text-white focus:border-indigo-400 focus:outline-none"
                    placeholder="Bloques libres, reuniones fijas, energía por momentos"
                  ></textarea>
                </div>
                <div>
                  <label for="areaMejorar" class="text-sm text-slate-300">Área a mejorar</label>
                  <select
                    id="areaMejorar"
                    class="mt-2 w-full rounded-2xl border border-white/10 bg-transparent px-4 py-2 text-white focus:border-indigo-400 focus:outline-none"
                  >
                    <option value="Dinero" class="bg-[#050816]">Dinero</option>
                    <option value="Tiempo" class="bg-[#050816]">Tiempo</option>
                    <option value="Hábitos" class="bg-[#050816]">Hábitos</option>
                    <option value="Energía" class="bg-[#050816]">Energía</option>
                    <option value="Familia" class="bg-[#050816]">Familia</option>
                  </select>
                </div>
                <div>
                  <label for="nivelCaos" class="text-sm text-slate-300">Nivel de caos actual</label>
                  <select
                    id="nivelCaos"
                    class="mt-2 w-full rounded-2xl border border-white/10 bg-transparent px-4 py-2 text-white focus:border-indigo-400 focus:outline-none"
                  >
                    <option value="Tranquilo, solo quiero optimizar" class="bg-[#050816]">Tranquilo, solo quiero optimizar</option>
                    <option value="Hay estrés constante" class="bg-[#050816]">Hay estrés constante</option>
                    <option value="Mi agenda es impredecible pero quiero orden" class="bg-[#050816]">Mi agenda es impredecible pero quiero orden</option>
                    <option value="Apagando incendios cada día" class="bg-[#050816]">Apagando incendios cada día</option>
                  </select>
                </div>
                <p id="form-error" class="hidden rounded-2xl bg-red-500/10 px-4 py-2 text-sm text-red-300"></p>
                <button
                  type="submit"
                  class="inline-flex w-full items-center justify-center rounded-full bg-indigo-500 px-5 py-2.5 text-sm font-medium text-white shadow-lg shadow-indigo-500/30 transition hover:scale-[1.02] hover:bg-indigo-400 active:scale-[0.98]"
                >Generar plan inteligente</button>
              </form>
            </div>
            <div class="space-y-5">
              <div class="rounded-3xl border border-white/10 bg-[#050816] p-6">
                <div class="flex items-center justify-between gap-4">
                  <h3 class="text-xl font-semibold text-white">Tu plan personalizado</h3>
                  <button
                    id="copySummary"
                    type="button"
                    class="text-xs text-indigo-300 hover:text-indigo-100 focus:outline-none"
                  >Copiar resumen</button>
                </div>
                <div class="mt-4 space-y-4 text-sm">
                  <div>
                    <p class="text-xs uppercase tracking-[0.25em] text-slate-400">Resumen financiero</p>
                    <p id="planFinanzas" class="mt-1 text-base text-white">Completa el formulario para recibir tu resumen financiero.</p>
                  </div>
                  <div>
                    <p class="text-xs uppercase tracking-[0.25em] text-slate-400">Plan de hábitos</p>
                    <p id="planHabitos" class="mt-1 text-base text-white">Aquí verás los hábitos que sostendrán tu plan.</p>
                  </div>
                  <div>
                    <p class="text-xs uppercase tracking-[0.25em] text-slate-400">Horario sugerido</p>
                    <p id="planHorario" class="mt-1 text-base text-white">Bloques de tiempo aparecerán tras generar tu plan.</p>
                  </div>
                  <div>
                    <p class="text-xs uppercase tracking-[0.25em] text-slate-400">Prioridades 7 días</p>
                    <p id="planSiete" class="mt-1 text-base text-white">Tus próximos pasos clave se mostrarán aquí.</p>
                  </div>
                </div>
                <p id="copyStatus" class="mt-3 hidden text-xs text-emerald-300"></p>
              </div>

              <div class="rounded-3xl border border-white/10 bg-[#050816] p-6">
                <h4 class="text-lg font-semibold text-white">Guardar este plan</h4>
                <p class="text-sm text-slate-400">Se guarda en este dispositivo o en tu cuenta.</p>
                <div class="mt-4 space-y-3">
                  <input
                    id="planName"
                    type="text"
                    placeholder="Nombre del plan"
                    class="w-full rounded-2xl border border-white/10 bg-transparent px-4 py-2 text-sm text-white focus:border-indigo-400 focus:outline-none"
                  />
                  <p id="planSaveMessage" class="text-xs text-slate-400">
                    Tus planes se guardan en este dispositivo. Inicia sesión para sincronizarlos en la nube.
                  </p>
                  <button
                    id="savePlan"
                    type="button"
                    class="inline-flex w-full items-center justify-center rounded-full border border-white/15 bg-white/5 px-4 py-2 text-sm text-slate-200 transition hover:bg-white/10"
                  >Guardar plan</button>
                </div>
              </div>

              <div class="rounded-3xl border border-white/10 bg-[#050816] p-6">
                <div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
                  <div>
                    <h4 class="text-lg font-semibold text-white">Planes guardados</h4>
                    <p class="text-sm text-slate-400">Accede desde aquí a tus planes locales o sincronizados.</p>
                  </div>
                  <span
                    id="cloudSyncBadge"
                    class="hidden rounded-full bg-emerald-500/10 px-3 py-1 text-xs font-medium text-emerald-300"
                  >Sincronizado con la nube</span>
                </div>
                <div class="mt-6 space-y-8">
                  <div>
                    <p class="text-sm font-semibold text-white">Guardados en este dispositivo</p>
                    <div id="localPlansList" class="mt-3 space-y-3 text-sm text-slate-300">
                      <p class="text-sm text-slate-400">Todavía no has guardado ningún plan local.</p>
                    </div>
                  </div>
                  <div id="cloudPlansSection" class="hidden">
                    <div class="flex items-center justify-between gap-3">
                      <p class="text-sm font-semibold text-white">Guardados en la nube</p>
                      <p id="cloudPlansStatus" class="text-xs text-slate-400"></p>
                    </div>
                    <div id="cloudPlansList" class="mt-3 space-y-3 text-sm text-slate-300"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Casos reales -->
        <section id="casos" class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
          <div class="space-y-3 text-center">
            <p class="text-sm font-semibold text-indigo-300">Historias reales</p>
            <h2 class="text-3xl font-semibold text-white">Casos reales donde AI Life Organizer brilla</h2>
            <p class="text-base text-slate-400">No todos tienen la misma vida, pero todos merecen claridad.</p>
          </div>
          <div class="mt-12 grid gap-6 sm:grid-cols-3">
            <article class="rounded-3xl border border-white/10 bg-[#0b1020] p-5">
              <h3 class="text-lg font-semibold text-white">Ana, mamá que trabaja medio tiempo</h3>
              <p class="mt-2 text-sm text-slate-400">Divide su energía entre el trabajo, la casa y dos hijos curiosos.</p>
              <ul class="mt-3 list-disc space-y-1 pl-5 text-sm text-slate-300">
                <li>Visualiza gastos familiares versus actividades escolares.</li>
                <li>Encuentra bloques cortos para autocuidado y pareja.</li>
                <li>Planifica menús rápidos para optimizar compras.</li>
              </ul>
            </article>
            <article class="rounded-3xl border border-white/10 bg-[#0b1020] p-5">
              <h3 class="text-lg font-semibold text-white">Luis, emprendedor con horarios locos</h3>
              <p class="mt-2 text-sm text-slate-400">Alterna entre ventas, equipo remoto y viajes improvisados.</p>
              <ul class="mt-3 list-disc space-y-1 pl-5 text-sm text-slate-300">
                <li>Reordena pagos y reinversiones según flujo real.</li>
                <li>Bloquea mañanas de enfoque profundo y tardes comerciales.</li>
                <li>Detecta cuándo delegar para no apagar incendios solo.</li>
              </ul>
            </article>
            <article class="rounded-3xl border border-white/10 bg-[#0b1020] p-5">
              <h3 class="text-lg font-semibold text-white">María, estudiante y freelance</h3>
              <p class="mt-2 text-sm text-slate-400">Combina tesis, clientes y cuidado de su salud mental.</p>
              <ul class="mt-3 list-disc space-y-1 pl-5 text-sm text-slate-300">
                <li>Controla ingresos variables y crea colchón para imprevistos.</li>
                <li>Divide semanas entre investigación, clientes y descanso.</li>
                <li>Implementa rituales cortos para proteger su energía.</li>
              </ul>
            </article>
          </div>
          <div class="mt-10 space-y-4">
            <div class="rounded-3xl border border-white/10 bg-[#050816] p-5">
              <div class="space-y-3 border-l border-indigo-500/60 pl-4 text-sm">
                <p class="text-slate-200">“Nunca había visto mi dinero, hábitos y agenda alineados en una sola página.”</p>
                <p class="text-slate-400">— Julieta, consultora independiente</p>
              </div>
            </div>
            <div class="rounded-3xl border border-white/10 bg-[#050816] p-5">
              <div class="space-y-3 border-l border-indigo-500/60 pl-4 text-sm">
                <p class="text-slate-200">“Lo uso cada domingo para planear la semana sin sentir culpa por descansar.”</p>
                <p class="text-slate-400">— Diego, product manager</p>
              </div>
            </div>
          </div>
          <div class="mt-10 text-center">
            <p class="text-base text-slate-300">Prueba tu propio plan en 3 minutos.</p>
            <a
              href="#app"
              class="mt-4 inline-flex items-center justify-center rounded-full bg-indigo-500 px-5 py-2.5 text-sm font-medium text-white shadow-lg shadow-indigo-500/30 transition hover:scale-[1.02] hover:bg-indigo-400 active:scale-[0.98]"
            >Ir al generador</a>
          </div>
        </section>

        <!-- Planes -->
        <section id="planes" class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
          <div class="space-y-3 text-center">
            <p class="text-sm font-semibold text-indigo-300">Elige tu ritmo</p>
            <h2 class="text-3xl font-semibold text-white">Planes simples y transparentes</h2>
            <p class="text-base text-slate-400">Accede hoy gratis o reserva funciones PRO en la lista de espera.</p>
          </div>
          <div class="mt-12 grid gap-6 lg:grid-cols-2">
            <div class="rounded-3xl border border-white/10 bg-[#050816] p-6">
              <p class="text-sm text-indigo-300">Starter</p>
              <h3 class="mt-3 text-2xl font-semibold text-white">Plan Gratuito</h3>
              <p class="mt-2 text-sm text-slate-400">Genera planes ilimitados, guarda en tu dispositivo y copia resúmenes.</p>
              <p class="mt-6 text-4xl font-semibold text-white">$0</p>
              <ul class="mt-6 space-y-2 text-sm text-slate-300">
                <li>✔️ Generador ilimitado</li>
                <li>✔️ Plantillas rápidas</li>
                <li>✔️ Guardado local</li>
              </ul>
              <div class="mt-8">
                <a
                  href="#app"
                  class="inline-flex w-full items-center justify-center rounded-full border border-white/15 bg-white/5 px-4 py-2 text-sm text-slate-200 transition hover:bg-white/10"
                >Empieza gratis</a>
              </div>
            </div>
            <div class="rounded-3xl border border-indigo-500/40 bg-gradient-to-b from-indigo-500/10 via-transparent to-transparent p-6">
              <p class="text-sm text-indigo-300">PRO</p>
              <h3 class="mt-3 text-2xl font-semibold text-white">Plan PRO (beta)</h3>
              <p class="mt-2 text-sm text-slate-300">Acceso temprano a historial en la nube, plantillas colaborativas y analítica avanzada.</p>
              <p class="mt-6 text-4xl font-semibold text-white">$9<span class="text-base text-slate-400">/mes</span></p>
              <ul class="mt-6 space-y-2 text-sm text-slate-200">
                <li>⭐ Historial multiplataforma</li>
                <li>⭐ Alertas inteligentes</li>
                <li>⭐ Integraciones con calendario</li>
              </ul>
              <div class="mt-8">
                <button
                  id="open-waitlist"
                  type="button"
                  class="inline-flex w-full items-center justify-center rounded-full bg-indigo-500 px-5 py-2.5 text-sm font-medium text-white shadow-lg shadow-indigo-500/30 transition hover:scale-[1.02] hover:bg-indigo-400 active:scale-[0.98]"
                >Unirme a la lista de espera</button>
              </div>
            </div>
          </div>
        </section>

        <!-- FAQ -->
        <section id="faq" class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
          <div class="space-y-3 text-center">
            <p class="text-sm font-semibold text-indigo-300">Preguntas frecuentes</p>
            <h2 class="text-3xl font-semibold text-white">Todo lo que necesitas saber</h2>
            <p class="text-base text-slate-400">Transparencia total para que tomes la mejor decisión.</p>
          </div>
          <div class="mt-10 space-y-4">
            <div class="rounded-3xl border border-white/10 bg-[#050816]">
              <button
                type="button"
                class="faq-button flex w-full items-center justify-between px-6 py-4 text-left text-base text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"
                aria-expanded="false"
                aria-controls="faq-1"
              >
                ¿Necesito datos exactos para generar un plan?
                <span class="text-indigo-300">+</span>
              </button>
              <div id="faq-1" class="faq-content hidden border-t border-white/5 px-6 py-4 text-sm text-slate-300">
                No. Con aproximaciones de ingresos, gastos y horarios la IA puede armar recomendaciones útiles que luego podrás ajustar.
              </div>
            </div>
            <div class="rounded-3xl border border-white/10 bg-[#050816]">
              <button
                type="button"
                class="faq-button flex w-full items-center justify-between px-6 py-4 text-left text-base text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"
                aria-expanded="false"
                aria-controls="faq-2"
              >
                ¿Dónde se guardan mis planes?
                <span class="text-indigo-300">+</span>
              </button>
              <div id="faq-2" class="faq-content hidden border-t border-white/5 px-6 py-4 text-sm text-slate-300">
                Tus planes viven en tu navegador y, si inicias sesión, también se sincronizan de forma privada en la nube de Supabase.
              </div>
            </div>
            <div class="rounded-3xl border border-white/10 bg-[#050816]">
              <button
                type="button"
                class="faq-button flex w-full items-center justify-between px-6 py-4 text-left text-base text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"
                aria-expanded="false"
                aria-controls="faq-3"
              >
                ¿Puedo actualizar el plan cuando cambie mi vida?
                <span class="text-indigo-300">+</span>
              </button>
              <div id="faq-3" class="faq-content hidden border-t border-white/5 px-6 py-4 text-sm text-slate-300">
                Sí. Puedes editar los campos y generar nuevos planes ilimitadas veces cuando cambien tus prioridades.
              </div>
            </div>
          </div>
        </section>
      </main>

      <footer class="border-t border-white/5 bg-[#030712]">
        <div class="mx-auto flex max-w-6xl flex-col items-center justify-between gap-4 px-4 py-8 text-sm text-slate-400 sm:flex-row sm:px-6 lg:px-8">
          <p>© <span id="year"></span> AI Life Organizer. Todos los derechos reservados.</p>
          <div class="flex gap-4">
            <a href="#planes" class="hover:text-white">Planes</a>
            <a href="#faq" class="hover:text-white">FAQ</a>
            <a href="#app" class="hover:text-white">Generar plan</a>
          </div>
        </div>
      </footer>
    </div>

    <!-- Modal iniciar sesión -->
    <div id="loginModal" class="fixed inset-0 z-40 hidden items-center justify-center bg-black/60 p-4">
      <div role="dialog" aria-modal="true" class="w-full max-w-md rounded-3xl border border-white/10 bg-[#050816] p-6 shadow-2xl">
        <div class="flex items-start justify-between gap-4">
          <div>
            <p class="text-xs uppercase tracking-[0.3em] text-indigo-300">Acceso</p>
            <h3 class="text-xl font-semibold text-white">Inicia sesión</h3>
          </div>
          <button data-close-login class="text-slate-400 transition hover:text-white" aria-label="Cerrar modal">✕</button>
        </div>
        <form id="loginForm" class="mt-6 space-y-4">
          <div>
            <label for="loginEmail" class="text-sm text-slate-300">Correo electrónico</label>
            <input
              id="loginEmail"
              type="email"
              required
              class="mt-2 w-full rounded-2xl border border-white/10 bg-transparent px-4 py-2 text-white focus:border-indigo-400 focus:outline-none"
              placeholder="tu@correo.com"
            />
          </div>
          <div>
            <label for="loginPassword" class="text-sm text-slate-300">Contraseña</label>
            <input
              id="loginPassword"
              type="password"
              required
              class="mt-2 w-full rounded-2xl border border-white/10 bg-transparent px-4 py-2 text-white focus:border-indigo-400 focus:outline-none"
              placeholder="********"
            />
          </div>
          <button
            type="submit"
            class="inline-flex w-full items-center justify-center rounded-full bg-indigo-500 px-5 py-2.5 text-sm font-medium text-white shadow-lg shadow-indigo-500/30 transition hover:scale-[1.02] hover:bg-indigo-400 active:scale-[0.98]"
          >Iniciar sesión</button>
          <p id="loginError" class="text-xs text-rose-300"></p>
          <p class="text-xs text-slate-400">
            ¿No tienes cuenta?
            <button type="button" id="openRegisterLink" class="text-indigo-300 underline underline-offset-2">Crear una ahora</button>
          </p>
          <button
            type="button"
            data-close-login
            class="inline-flex w-full items-center justify-center rounded-full border border-white/15 bg-white/5 px-4 py-2 text-sm text-slate-200 transition hover:bg-white/10"
          >Cerrar</button>
        </form>
      </div>
    </div>

    <!-- Modal crear cuenta -->
    <div id="registerModal" class="fixed inset-0 z-40 hidden items-center justify-center bg-black/60 p-4">
      <div role="dialog" aria-modal="true" class="w-full max-w-md rounded-3xl border border-white/10 bg-[#050816] p-6 shadow-2xl">
        <div class="flex items-start justify-between gap-4">
          <div>
            <p class="text-xs uppercase tracking-[0.3em] text-indigo-300">Bienvenida</p>
            <h3 class="text-xl font-semibold text-white">Crea tu cuenta</h3>
          </div>
          <button data-close-register class="text-slate-400 transition hover:text-white" aria-label="Cerrar modal">✕</button>
        </div>
        <form id="registerForm" class="mt-6 space-y-4">
          <div>
            <label for="registerEmail" class="text-sm text-slate-300">Correo electrónico</label>
            <input
              id="registerEmail"
              type="email"
              required
              class="mt-2 w-full rounded-2xl border border-white/10 bg-transparent px-4 py-2 text-white focus:border-indigo-400 focus:outline-none"
              placeholder="tu@correo.com"
            />
          </div>
          <div>
            <label for="registerPassword" class="text-sm text-slate-300">Contraseña</label>
            <input
              id="registerPassword"
              type="password"
              required
              class="mt-2 w-full rounded-2xl border border-white/10 bg-transparent px-4 py-2 text-white focus:border-indigo-400 focus:outline-none"
              placeholder="********"
            />
          </div>
          <button
            type="submit"
            class="inline-flex w-full items-center justify-center rounded-full bg-indigo-500 px-5 py-2.5 text-sm font-medium text-white shadow-lg shadow-indigo-500/30 transition hover:scale-[1.02] hover:bg-indigo-400 active:scale-[0.98]"
          >Crear cuenta</button>
          <p id="registerError" class="text-xs text-rose-300"></p>
          <p id="registerSuccess" class="text-xs text-emerald-300"></p>
          <p class="text-xs text-slate-400">
            ¿Ya tienes cuenta?
            <button type="button" id="openLoginLink" class="text-indigo-300 underline underline-offset-2">Inicia sesión aquí</button>
          </p>
          <button
            type="button"
            data-close-register
            class="inline-flex w-full items-center justify-center rounded-full border border-white/15 bg-white/5 px-4 py-2 text-sm text-slate-200 transition hover:bg-white/10"
          >Cerrar</button>
        </form>
      </div>
    </div>

    <!-- Modal lista de espera PRO -->
    <div id="waitlist-modal" class="fixed inset-0 z-40 hidden items-center justify-center bg-black/60 p-4">
      <div class="max-w-md w-full rounded-3xl border border-white/10 bg-[#050816] p-6 shadow-2xl">
        <div class="flex items-start justify-between">
          <div>
            <p class="text-sm text-indigo-300">Beta privada</p>
            <h3 class="mt-1 text-2xl font-semibold text-white">Unirte a la lista de espera PRO</h3>
          </div>
          <button id="close-waitlist" class="text-slate-400 hover:text-white" aria-label="Cerrar modal">✕</button>
        </div>
        <p class="mt-4 text-sm text-slate-400">
          Próximamente desbloquearemos historial en la nube, modos colaborativos e integraciones con tus herramientas favoritas.
        </p>
        <form id="waitlist-form" class="mt-6 space-y-3">
          <input
            id="waitlist-email"
            type="email"
            placeholder="tu@correo.com"
            class="w-full rounded-2xl border border-white/10 bg-transparent px-4 py-2 text-sm text-white focus:border-indigo-400 focus:outline-none"
            required
          />
          <button
            type="submit"
            class="inline-flex w-full items-center justify-center rounded-full bg-indigo-500 px-5 py-2.5 text-sm font-medium text-white shadow-lg shadow-indigo-500/30 transition hover:scale-[1.02] hover:bg-indigo-400 active:scale-[0.98]"
          >Guardar mi lugar</button>
          <p id="waitlist-message" class="text-xs text-emerald-300"></p>
          <button
            id="waitlist-cancel"
            type="button"
            class="inline-flex w-full items-center justify-center rounded-full border border-white/15 bg-white/5 px-4 py-2 text-sm text-slate-200 transition hover:bg-white/10"
          >Cerrar</button>
        </form>
      </div>
    </div>

    <script>
      (() => {
        // Configuración real de Supabase para el modo navegador
        const SUPABASE_URL = "https://esbdlhqdiglixupjgqqh.supabase.co";
        const SUPABASE_ANON_KEY =
          "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVzYmRsaHFkaWdsaXh1cGpncXFoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyNzU2NTYsImV4cCI6MjA3ODg1MTY1Nn0.GM2UEug_Zo3BiJgdNiq_yJccwEbb_rZqPJ4fAOvpKs0";
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        // Estado global
        let currentUser = null;
        let lastGeneratedPlan = null;
        let localPlans = [];
        let cloudPlans = [];
        let isLoadingCloudPlans = false;
        let planMessageTimeout = null;

        // Claves de almacenamiento
        const plansStorageKey = 'aiLifeOrganizerPlans';
        const waitlistStorageKey = 'aiLifeOrganizerWaitlist';

        // Referencias de interfaz
        const navLinks = document.querySelectorAll('.nav-link');
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        const lifeForm = document.getElementById('lifeForm');
        const formError = document.getElementById('form-error');
        const planFinanzas = document.getElementById('planFinanzas');
        const planHabitos = document.getElementById('planHabitos');
        const planHorario = document.getElementById('planHorario');
        const planSiete = document.getElementById('planSiete');
        const planNameInput = document.getElementById('planName');
        const planSaveButton = document.getElementById('savePlan');
        const planSaveMessage = document.getElementById('planSaveMessage');
        const localPlansList = document.getElementById('localPlansList');
        const cloudPlansSection = document.getElementById('cloudPlansSection');
        const cloudPlansList = document.getElementById('cloudPlansList');
        const cloudPlansStatus = document.getElementById('cloudPlansStatus');
        const cloudSyncBadge = document.getElementById('cloudSyncBadge');
        const copySummaryBtn = document.getElementById('copySummary');
        const copyStatus = document.getElementById('copyStatus');
        const templateChips = document.querySelectorAll('.template-chip');
        const waitlistModal = document.getElementById('waitlist-modal');
        const openWaitlistBtn = document.getElementById('open-waitlist');
        const closeWaitlistBtn = document.getElementById('close-waitlist');
        const waitlistCancelBtn = document.getElementById('waitlist-cancel');
        const waitlistForm = document.getElementById('waitlist-form');
        const waitlistEmail = document.getElementById('waitlist-email');
        const waitlistMessage = document.getElementById('waitlist-message');
        const loginTrigger = document.getElementById('loginTrigger');
        const signupTrigger = document.getElementById('signupTrigger');
        const logoutButton = document.getElementById('logoutButton');
        const authUserBadge = document.getElementById('authUserBadge');
        const authEmailDisplay = document.getElementById('authEmailDisplay');
        const loginModal = document.getElementById('loginModal');
        const registerModal = document.getElementById('registerModal');
        const loginForm = document.getElementById('loginForm');
        const loginEmail = document.getElementById('loginEmail');
        const loginPassword = document.getElementById('loginPassword');
        const loginError = document.getElementById('loginError');
        const registerForm = document.getElementById('registerForm');
        const registerEmail = document.getElementById('registerEmail');
        const registerPassword = document.getElementById('registerPassword');
        const registerError = document.getElementById('registerError');
        const registerSuccess = document.getElementById('registerSuccess');
        const loginCloseButtons = document.querySelectorAll('[data-close-login]');
        const registerCloseButtons = document.querySelectorAll('[data-close-register]');
        const openRegisterLink = document.getElementById('openRegisterLink');
        const openLoginLink = document.getElementById('openLoginLink');
        const footerYear = document.getElementById('year');

        const defaultOutputs = {
          planFinanzas: planFinanzas?.textContent || '',
          planHabitos: planHabitos?.textContent || '',
          planHorario: planHorario?.textContent || '',
          planSiete: planSiete?.textContent || '',
        };

        const escapeHtml = (value = '') =>
          (value || '')
            .toString()
            .replace(/&/g, '&amp;')
            .replace(/</g, '&lt;')
            .replace(/>/g, '&gt;')
            .replace(/"/g, '&quot;')
            .replace(/'/g, '&#39;');

        const updateBodyModalState = () => {
          const modals = [loginModal, registerModal, waitlistModal];
          const isOpen = modals.some((modal) => modal && !modal.classList.contains('hidden'));
          document.body.classList.toggle('modal-open', isOpen);
        };

        // Utilidades generales
        const initFooterYear = () => {
          if (footerYear) {
            footerYear.textContent = new Date().getFullYear();
          }
        };

        const smoothScrollTo = (target) => {
          const element = document.querySelector(target);
          if (!element) return;
          element.scrollIntoView({ behavior: 'smooth', block: 'start' });
        };

        const showPlanMessage = (message, variant = 'info', persistent = false) => {
          if (!planSaveMessage) return;
          planSaveMessage.textContent = message;
          planSaveMessage.classList.remove('text-rose-300', 'text-emerald-300', 'text-slate-300', 'text-slate-400');
          const variantClass =
            variant === 'success'
              ? 'text-emerald-300'
              : variant === 'error'
              ? 'text-rose-300'
              : 'text-slate-300';
          planSaveMessage.classList.add(variantClass);
          if (!persistent) {
            if (planMessageTimeout) {
              clearTimeout(planMessageTimeout);
            }
            planMessageTimeout = window.setTimeout(() => {
              setPlanDefaultMessage();
            }, 4000);
          } else if (planMessageTimeout) {
            clearTimeout(planMessageTimeout);
            planMessageTimeout = null;
          }
        };

        const setPlanDefaultMessage = () => {
          const defaultMessage = currentUser
            ? 'Tus planes se sincronizarán en la nube al guardarlos.'
            : 'Tus planes se guardan en este dispositivo. Inicia sesión para sincronizarlos en la nube.';
          const defaultVariant = currentUser ? 'success' : 'info';
          showPlanMessage(defaultMessage, defaultVariant, true);
        };

        // Animaciones y navegación
        const initSmoothScroll = () => {
          navLinks.forEach((link) => {
            link.addEventListener('click', (event) => {
              const href = link.getAttribute('href');
              if (href && href.startsWith('#')) {
                event.preventDefault();
                smoothScrollTo(href);
                mobileMenu?.classList.add('hidden');
                mobileMenuButton?.setAttribute('aria-expanded', 'false');
              }
            });
          });
        };

        const initSectionAnimations = () => {
          const sections = document.querySelectorAll('main section');
          const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
          if (prefersReducedMotion || !sections.length) return;
          const observer = new IntersectionObserver(
            (entries) => {
              entries.forEach((entry) => {
                if (entry.isIntersecting) {
                  entry.target.style.opacity = '1';
                  entry.target.style.transform = 'translateY(0)';
                  observer.unobserve(entry.target);
                }
              });
            },
            { threshold: 0.15 }
          );
          sections.forEach((section) => {
            section.style.opacity = '0';
            section.style.transform = 'translateY(24px)';
            section.style.transition = 'opacity 0.6s ease-out, transform 0.6s ease-out';
            observer.observe(section);
          });
        };

        const initMobileMenu = () => {
          if (!mobileMenuButton || !mobileMenu) return;
          mobileMenuButton.addEventListener('click', () => {
            const isHidden = mobileMenu.classList.toggle('hidden');
            mobileMenuButton.setAttribute('aria-expanded', (!isHidden).toString());
          });
          document.addEventListener('click', (event) => {
            if (!mobileMenu.contains(event.target) && !mobileMenuButton.contains(event.target)) {
              mobileMenu.classList.add('hidden');
              mobileMenuButton.setAttribute('aria-expanded', 'false');
            }
          });
        };

        const initFAQ = () => {
          document.querySelectorAll('.faq-button').forEach((button) => {
            button.addEventListener('click', () => {
              const contentId = button.getAttribute('aria-controls');
              const content = document.getElementById(contentId);
              const isExpanded = button.getAttribute('aria-expanded') === 'true';
              button.setAttribute('aria-expanded', (!isExpanded).toString());
              content?.classList.toggle('hidden');
              const indicator = button.querySelector('span');
              if (indicator) {
                indicator.textContent = isExpanded ? '+' : '−';
              }
            });
          });
        };

        // Plantillas y formulario
        const fillFormInputs = ({ ingresos, gastos, metas, horario, area, caos }) => {
          document.getElementById('ingresos').value = ingresos || '';
          document.getElementById('gastos').value = gastos || '';
          document.getElementById('metas').value = metas || '';
          document.getElementById('horarioDisponible').value = horario || '';
          document.getElementById('areaMejorar').value = area || 'Dinero';
          document.getElementById('nivelCaos').value = caos || 'Tranquilo, solo quiero optimizar';
        };

        const initTemplates = () => {
          templateChips.forEach((chip) => {
            chip.addEventListener('click', () => {
              fillFormInputs({
                ingresos: chip.dataset.ingresos,
                gastos: chip.dataset.gastos,
                metas: chip.dataset.metas,
                horario: chip.dataset.horario,
                area: chip.dataset.area,
                caos: chip.dataset.caos,
              });
              formError?.classList.add('hidden');
            });
          });
        };

        const collectFormValues = () => ({
          ingresos: document.getElementById('ingresos').value.trim(),
          gastos: document.getElementById('gastos').value.trim(),
          metas: document.getElementById('metas').value.trim(),
          horarioDisponible: document.getElementById('horarioDisponible').value.trim(),
          areaMejorar: document.getElementById('areaMejorar').value,
          nivelCaos: document.getElementById('nivelCaos').value,
        });

        const validateValues = (values) => {
          if (!values.ingresos || !values.gastos) {
            return 'Por favor ingresa tus ingresos y gastos estimados.';
          }
          if (Number(values.ingresos) < Number(values.gastos)) {
            return 'Tus gastos superan tus ingresos. Confirma que sea correcto para ajustar el plan.';
          }
          return '';
        };

        const generatePlanOutputs = (values) => {
          const ingresosNum = Number(values.ingresos) || 0;
          const gastosNum = Number(values.gastos) || 0;
          const ahorro = Math.max(ingresosNum - gastosNum, 0);
          const porcentajeAhorro = ingresosNum ? Math.round((ahorro / ingresosNum) * 100) : 0;

          const planFinanzasText = `Destina ${porcentajeAhorro}% (${ahorro.toLocaleString('es-ES')} unidades) a un fondo objetivo y revisa tus gastos variables cada viernes para proteger tu foco en ${values.areaMejorar.toLowerCase()}.`;

          const planHabitosText = `Conecta hábitos ancla con "${values.metas || 'tus metas clave'}": chequeo financiero de 10 min, ritual de energía al despertar y cierre diario con respiraciones profundas para gestionar el nivel de caos (${values.nivelCaos}).`;

          const planHorarioText = `Reserva bloques profundos donde tengas más energía (ej. ${values.horarioDisponible || 'mañanas frescas'}) y usa intervalos de 90 minutos con descansos breves para ejecutar tareas de alto impacto.`;

          const planSieteText = `Prioriza 3 acciones: (1) revisar flujo de dinero, (2) ejecutar un hábito clave diario y (3) reservar un bloque semanal para planificación. Repite durante 7 días y registra aprendizajes.`;

          return {
            planFinanzas: planFinanzasText,
            planHabitos: planHabitosText,
            planHorario: planHorarioText,
            planSiete: planSieteText,
          };
        };

        const updatePlanOutputs = (outputs = {}) => {
          if (planFinanzas) planFinanzas.textContent = outputs.planFinanzas || defaultOutputs.planFinanzas;
          if (planHabitos) planHabitos.textContent = outputs.planHabitos || defaultOutputs.planHabitos;
          if (planHorario) planHorario.textContent = outputs.planHorario || defaultOutputs.planHorario;
          if (planSiete) planSiete.textContent = outputs.planSiete || defaultOutputs.planSiete;
        };

        const initFormPlan = () => {
          if (!lifeForm) return;
          lifeForm.addEventListener('submit', (event) => {
            event.preventDefault();
            const values = collectFormValues();
            const errorMessage = validateValues(values);
            if (errorMessage) {
              formError.textContent = errorMessage;
              formError.classList.remove('hidden');
              return;
            }
            formError.classList.add('hidden');
            const outputs = generatePlanOutputs(values);
            updatePlanOutputs(outputs);
            lastGeneratedPlan = { inputs: values, outputs };
            showPlanMessage('Plan generado correctamente. Dale un nombre y guárdalo.', 'success');
          });

          planSaveButton?.addEventListener('click', () => {
            handlePlanSave();
          });
        };

        // Copiar resumen
        const initCopySummary = () => {
          if (!copySummaryBtn || !copyStatus) return;
          copySummaryBtn.addEventListener('click', async () => {
            copyStatus.classList.add('hidden');
            if (!lastGeneratedPlan) {
              copyStatus.textContent = 'Genera un plan antes de copiar el resumen.';
              copyStatus.classList.remove('hidden');
              copyStatus.classList.remove('text-emerald-300');
              copyStatus.classList.add('text-rose-300');
              return;
            }
            const summary = `Resumen financiero: ${lastGeneratedPlan.outputs.planFinanzas}\nPlan de hábitos: ${lastGeneratedPlan.outputs.planHabitos}\nHorario sugerido: ${lastGeneratedPlan.outputs.planHorario}\nPrioridades 7 días: ${lastGeneratedPlan.outputs.planSiete}`;
            try {
              await navigator.clipboard.writeText(summary);
              copyStatus.textContent = 'Resumen copiado ✅';
              copyStatus.classList.remove('text-rose-300');
              copyStatus.classList.add('text-emerald-300');
            } catch (error) {
              copyStatus.textContent = 'No pudimos copiar el resumen.';
              copyStatus.classList.remove('text-emerald-300');
              copyStatus.classList.add('text-rose-300');
            }
            copyStatus.classList.remove('hidden');
            setTimeout(() => copyStatus.classList.add('hidden'), 2500);
          });
        };
        // Planes locales
        const loadLocalPlansFromStorage = () => {
          try {
            const stored = JSON.parse(localStorage.getItem(plansStorageKey)) || [];
            localPlans = Array.isArray(stored) ? stored : [];
          } catch (error) {
            localPlans = [];
          }
        };

        const persistLocalPlans = () => {
          try {
            localStorage.setItem(plansStorageKey, JSON.stringify(localPlans));
          } catch (error) {
            console.error('No pudimos guardar el plan en este dispositivo.', error);
          }
        };

        const renderLocalPlans = () => {
          if (!localPlansList) return;
          if (!localPlans.length) {
            localPlansList.innerHTML = '<p class="text-sm text-slate-400">Todavía no has guardado ningún plan local.</p>';
            return;
          }
          localPlansList.innerHTML = localPlans
            .map(
              (plan) => `
                <div class="rounded-2xl border border-white/10 bg-white/5 p-4">
                  <div class="flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
                    <div>
                      <p class="font-medium text-white">${escapeHtml(plan.name)}</p>
                      <p class="text-xs text-slate-400">Disponible solo en este dispositivo</p>
                    </div>
                    <div class="flex gap-2 text-xs">
                      <button
                        data-local-action="load"
                        data-name="${encodeURIComponent(plan.name)}"
                        class="rounded-full border border-white/15 px-3 py-1 text-slate-200 transition hover:bg-white/10"
                      >Cargar</button>
                      <button
                        data-local-action="delete"
                        data-name="${encodeURIComponent(plan.name)}"
                        class="rounded-full border border-white/15 px-3 py-1 text-slate-200 transition hover:bg-white/10"
                      >Eliminar</button>
                    </div>
                  </div>
                </div>`
            )
            .join('');
        };

        const savePlanLocally = (planName) => {
          if (!lastGeneratedPlan) return;
          const payload = {
            name: planName,
            inputs: { ...lastGeneratedPlan.inputs },
            outputs: { ...lastGeneratedPlan.outputs },
          };
          const existingIndex = localPlans.findIndex((plan) => plan.name === planName);
          if (existingIndex >= 0) {
            localPlans[existingIndex] = payload;
          } else {
            localPlans.unshift(payload);
          }
          persistLocalPlans();
          renderLocalPlans();
        };

        const handleLocalPlanAction = (event) => {
          const button = event.target.closest('button[data-local-action]');
          if (!button) return;
          const action = button.dataset.localAction;
          const planName = decodeURIComponent(button.dataset.name || '');
          const planData = localPlans.find((plan) => plan.name === planName);
          if (action === 'load' && planData) {
            fillFormInputs({
              ingresos: planData.inputs?.ingresos,
              gastos: planData.inputs?.gastos,
              metas: planData.inputs?.metas,
              horario: planData.inputs?.horarioDisponible,
              area: planData.inputs?.areaMejorar,
              caos: planData.inputs?.nivelCaos,
            });
            updatePlanOutputs(planData.outputs || {});
            lastGeneratedPlan = { inputs: planData.inputs, outputs: planData.outputs };
            planNameInput.value = planData.name;
            showPlanMessage('Plan cargado desde este dispositivo.', 'success');
            return;
          }
          if (action === 'delete') {
            localPlans = localPlans.filter((plan) => plan.name !== planName);
            persistLocalPlans();
            renderLocalPlans();
            showPlanMessage('Plan eliminado de este dispositivo.', 'info');
          }
        };

        const initLocalPlans = () => {
          loadLocalPlansFromStorage();
          renderLocalPlans();
          localPlansList?.addEventListener('click', handleLocalPlanAction);
        };

        // Planes en la nube
        const updateCloudStatus = (message = '', variant = 'muted') => {
          if (!cloudPlansStatus) return;
          cloudPlansStatus.textContent = message;
          cloudPlansStatus.classList.remove('text-rose-300', 'text-emerald-300', 'text-slate-400');
          const className =
            variant === 'error' ? 'text-rose-300' : variant === 'success' ? 'text-emerald-300' : 'text-slate-400';
          cloudPlansStatus.classList.add(className);
        };

        const formatRelativeTime = (dateString) => {
          const date = new Date(dateString);
          if (Number.isNaN(date.getTime())) {
            return 'Fecha desconocida';
          }
          const rtf = new Intl.RelativeTimeFormat('es', { numeric: 'auto' });
          let duration = (date.getTime() - Date.now()) / 1000;
          let unit = 'second';
          const divisions = [
            { amount: 60, unit: 'minute' },
            { amount: 60, unit: 'hour' },
            { amount: 24, unit: 'day' },
            { amount: 7, unit: 'week' },
            { amount: 4.34524, unit: 'month' },
            { amount: 12, unit: 'year' },
          ];
          for (const division of divisions) {
            if (Math.abs(duration) < division.amount) {
              break;
            }
            duration /= division.amount;
            unit = division.unit;
          }
          return rtf.format(Math.round(duration), unit);
        };

        const setCloudSectionVisibility = () => {
          if (!cloudPlansSection) return;
          if (currentUser) {
            cloudPlansSection.classList.remove('hidden');
          } else {
            cloudPlansSection.classList.add('hidden');
          }
        };

        const renderCloudPlans = () => {
          if (!cloudPlansList || !cloudPlansSection) return;
          setCloudSectionVisibility();
          if (!currentUser) {
            cloudPlansList.innerHTML = '';
            updateCloudStatus('', 'muted');
            return;
          }
          if (isLoadingCloudPlans) {
            updateCloudStatus('Cargando tus planes...', 'muted');
            cloudPlansList.innerHTML = '<p class="text-sm text-slate-400">Cargando tus planes...</p>';
            return;
          }
          if (!cloudPlans.length) {
            updateCloudStatus('', 'muted');
            cloudPlansList.innerHTML = '<p class="text-sm text-slate-400">Todavía no guardas planes en la nube.</p>';
            return;
          }
          updateCloudStatus('', 'muted');
          cloudPlansList.innerHTML = cloudPlans
            .map(
              (plan) => `
                <div class="rounded-2xl border border-white/10 bg-white/5 p-4">
                  <div class="flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
                    <div>
                      <p class="font-medium text-white">${escapeHtml(plan.name)}</p>
                      <p class="text-xs text-slate-400">${formatRelativeTime(plan.created_at)}</p>
                    </div>
                    <div class="flex gap-2 text-xs">
                      <button
                        data-cloud-action="load"
                        data-id="${plan.id}"
                        class="rounded-full border border-white/15 px-3 py-1 text-slate-200 transition hover:bg-white/10"
                      >Cargar</button>
                      <button
                        data-cloud-action="delete"
                        data-id="${plan.id}"
                        class="rounded-full border border-white/15 px-3 py-1 text-slate-200 transition hover:bg-white/10"
                      >Eliminar</button>
                    </div>
                  </div>
                </div>`
            )
            .join('');
        };

        const clearCloudPlansUI = () => {
          cloudPlans = [];
          isLoadingCloudPlans = false;
          if (cloudPlansList) {
            cloudPlansList.innerHTML = '';
          }
          updateCloudStatus('', 'muted');
          cloudSyncBadge?.classList.add('hidden');
          setCloudSectionVisibility();
        };

        const loadPlansFromSupabase = async () => {
          if (!currentUser) return;
          try {
            isLoadingCloudPlans = true;
            renderCloudPlans();
            const { data, error } = await supabase
              .from('plans')
              .select('*')
              .eq('user_id', currentUser.id)
              .order('created_at', { ascending: false });
            isLoadingCloudPlans = false;
            if (error) throw error;
            cloudPlans = (data || []).map((item) => ({
              id: item.id,
              name: item.name,
              created_at: item.created_at,
              inputs: item.inputs_json || {},
              outputs: item.outputs_json || {},
            }));
            cloudSyncBadge?.classList.remove('hidden');
            renderCloudPlans();
          } catch (error) {
            console.error('Error al cargar planes desde Supabase', error);
            isLoadingCloudPlans = false;
            updateCloudStatus('No pudimos cargar tus planes. Intenta más tarde.', 'error');
            if (cloudPlansList) {
              cloudPlansList.innerHTML = '<p class="text-sm text-rose-300">No pudimos cargar tus planes.</p>';
            }
          }
        };

        const savePlanToSupabase = async (planName) => {
          if (!currentUser) {
            throw new Error('Necesitas iniciar sesión para guardar en la nube.');
          }
          const payload = {
            user_id: currentUser.id,
            name: planName,
            inputs_json: { ...lastGeneratedPlan.inputs },
            outputs_json: { ...lastGeneratedPlan.outputs },
          };
          const { data, error } = await supabase.from('plans').insert(payload).select().single();
          if (error) throw error;
          return {
            id: data.id,
            name: data.name,
            created_at: data.created_at || new Date().toISOString(),
            inputs: data.inputs_json || {},
            outputs: data.outputs_json || {},
          };
        };

        const deletePlanFromSupabase = async (planId) => {
          if (!currentUser) {
            throw new Error('Necesitas iniciar sesión para administrar la nube.');
          }
          const { error } = await supabase
            .from('plans')
            .delete()
            .eq('id', planId)
            .eq('user_id', currentUser.id);
          if (error) throw error;
        };

        const handleCloudPlanAction = (event) => {
          const button = event.target.closest('button[data-cloud-action]');
          if (!button) return;
          const action = button.dataset.cloudAction;
          const planId = button.dataset.id;
          const planData = cloudPlans.find((plan) => plan.id === planId);
          if (action === 'load' && planData) {
            fillFormInputs({
              ingresos: planData.inputs?.ingresos,
              gastos: planData.inputs?.gastos,
              metas: planData.inputs?.metas,
              horario: planData.inputs?.horarioDisponible,
              area: planData.inputs?.areaMejorar,
              caos: planData.inputs?.nivelCaos,
            });
            updatePlanOutputs(planData.outputs || {});
            lastGeneratedPlan = { inputs: planData.inputs, outputs: planData.outputs };
            planNameInput.value = planData.name;
            showPlanMessage('Plan cargado desde la nube.', 'success');
            return;
          }
          if (action === 'delete' && planId) {
            deletePlanFromSupabase(planId)
              .then(() => {
                cloudPlans = cloudPlans.filter((plan) => plan.id !== planId);
                renderCloudPlans();
                showPlanMessage('Plan eliminado de la nube.', 'info');
              })
              .catch((error) => {
                console.error('Error al eliminar plan en la nube', error);
                showPlanMessage('No pudimos eliminar el plan remoto.', 'error');
              });
          }
        };

        const initCloudPlans = () => {
          cloudPlansList?.addEventListener('click', handleCloudPlanAction);
          setCloudSectionVisibility();
        };

        const setSavingState = (isSaving) => {
          if (!planSaveButton) return;
          planSaveButton.disabled = isSaving;
          planSaveButton.classList.toggle('opacity-60', isSaving);
        };

        const handlePlanSave = async () => {
          if (!planNameInput) return;
          const planName = planNameInput.value.trim();
          if (!planName) {
            showPlanMessage('Escribe un nombre para tu plan.', 'error');
            return;
          }
          if (!lastGeneratedPlan) {
            showPlanMessage('Genera un plan antes de guardarlo.', 'error');
            return;
          }
          savePlanLocally(planName);
          if (!currentUser) {
            showPlanMessage('Plan guardado localmente. Para sincronizarlo, inicia sesión.', 'info');
            return;
          }
          try {
            setSavingState(true);
            const savedPlan = await savePlanToSupabase(planName);
            cloudPlans = [savedPlan, ...cloudPlans.filter((plan) => plan.id !== savedPlan.id)];
            renderCloudPlans();
            showPlanMessage('Plan sincronizado en la nube.', 'success');
          } catch (error) {
            console.error('Error al guardar plan en la nube', error);
            showPlanMessage('No pudimos guardar el plan en la nube. Intenta más tarde.', 'error');
          } finally {
            setSavingState(false);
          }
        };

        // Autenticación
        const openLoginModal = () => {
          if (!loginModal) return;
          loginModal.classList.remove('hidden');
          loginError.textContent = '';
          updateBodyModalState();
          setTimeout(() => loginEmail?.focus(), 50);
        };

        const closeLoginModal = () => {
          if (!loginModal) return;
          loginModal.classList.add('hidden');
          loginForm?.reset();
          loginError.textContent = '';
          updateBodyModalState();
        };

        const openRegisterModal = () => {
          if (!registerModal) return;
          registerModal.classList.remove('hidden');
          registerError.textContent = '';
          registerSuccess.textContent = '';
          updateBodyModalState();
          setTimeout(() => registerEmail?.focus(), 50);
        };

        const closeRegisterModal = () => {
          if (!registerModal) return;
          registerModal.classList.add('hidden');
          registerForm?.reset();
          registerError.textContent = '';
          registerSuccess.textContent = '';
          updateBodyModalState();
        };

        const handleSignUp = async (email, password) => {
          const { data, error } = await supabase.auth.signUp({ email, password });
          if (error) throw error;
          return data;
        };

        const handleSignIn = async (email, password) => {
          const { data, error } = await supabase.auth.signInWithPassword({ email, password });
          if (error) throw error;
          return data;
        };

        const handleSignOut = async () => {
          await supabase.auth.signOut();
          currentUser = null;
          updateAuthUI();
          clearCloudPlansUI();
        };

        const fetchCurrentUser = async () => {
          const { data } = await supabase.auth.getUser();
          currentUser = data?.user || null;
        };

        const updateAuthUI = () => {
          if (currentUser) {
            authUserBadge?.classList.remove('hidden');
            authEmailDisplay.textContent = currentUser.email || '';
            loginTrigger?.classList.add('hidden');
            signupTrigger?.classList.add('hidden');
            logoutButton?.classList.remove('hidden');
            cloudSyncBadge?.classList.remove('hidden');
          } else {
            authUserBadge?.classList.add('hidden');
            authEmailDisplay.textContent = '';
            loginTrigger?.classList.remove('hidden');
            signupTrigger?.classList.remove('hidden');
            logoutButton?.classList.add('hidden');
            cloudSyncBadge?.classList.add('hidden');
          }
          setPlanDefaultMessage();
          setCloudSectionVisibility();
        };

        const initAuthModals = () => {
          loginTrigger?.addEventListener('click', () => openLoginModal());
          signupTrigger?.addEventListener('click', () => openRegisterModal());
          loginCloseButtons.forEach((button) => button.addEventListener('click', () => closeLoginModal()));
          registerCloseButtons.forEach((button) => button.addEventListener('click', () => closeRegisterModal()));
          loginModal?.addEventListener('click', (event) => {
            if (event.target === loginModal) {
              closeLoginModal();
            }
          });
          registerModal?.addEventListener('click', (event) => {
            if (event.target === registerModal) {
              closeRegisterModal();
            }
          });
          openRegisterLink?.addEventListener('click', () => {
            closeLoginModal();
            openRegisterModal();
          });
          openLoginLink?.addEventListener('click', () => {
            closeRegisterModal();
            openLoginModal();
          });
          logoutButton?.addEventListener('click', async () => {
            try {
              await handleSignOut();
              showPlanMessage('Sesión cerrada. Continúas en modo local.', 'info');
            } catch (error) {
              console.error('Error al cerrar sesión', error);
              showPlanMessage('No pudimos cerrar sesión. Intenta nuevamente.', 'error');
            }
          });

          loginForm?.addEventListener('submit', async (event) => {
            event.preventDefault();
            loginError.textContent = '';
            const email = loginEmail.value.trim();
            const password = loginPassword.value.trim();
            if (!email || !password) {
              loginError.textContent = 'Completa tu correo y contraseña.';
              return;
            }
            try {
              await handleSignIn(email, password);
              closeLoginModal();
              showPlanMessage('Sesión iniciada. Cargando tus planes...', 'success');
            } catch (error) {
              loginError.textContent = error.message || 'No pudimos iniciar sesión.';
            }
          });

          registerForm?.addEventListener('submit', async (event) => {
            event.preventDefault();
            registerError.textContent = '';
            registerSuccess.textContent = '';
            const email = registerEmail.value.trim();
            const password = registerPassword.value.trim();
            if (!email || !password) {
              registerError.textContent = 'Completa correo y contraseña.';
              return;
            }
            try {
              await handleSignUp(email, password);
              registerSuccess.textContent = 'Te enviamos un correo para confirmar tu cuenta.';
              registerForm.reset();
            } catch (error) {
              registerError.textContent = error.message || 'No pudimos crear tu cuenta.';
            }
          });
        };

        const initAuthState = async () => {
          await fetchCurrentUser();
          updateAuthUI();
          if (currentUser) {
            loadPlansFromSupabase();
          } else {
            clearCloudPlansUI();
          }
          supabase.auth.onAuthStateChange((_event, session) => {
            currentUser = session?.user || null;
            updateAuthUI();
            if (currentUser) {
              loadPlansFromSupabase();
            } else {
              clearCloudPlansUI();
            }
          });
        };

        // Modal lista de espera PRO
        const initProWaitlistModal = () => {
          if (!waitlistModal) return;
          const openModal = () => {
            waitlistModal.classList.remove('hidden');
            updateBodyModalState();
            setTimeout(() => waitlistEmail?.focus(), 50);
          };
          const closeModal = () => {
            waitlistModal.classList.add('hidden');
            waitlistMessage.textContent = '';
            updateBodyModalState();
          };
          openWaitlistBtn?.addEventListener('click', () => openModal());
          closeWaitlistBtn?.addEventListener('click', () => closeModal());
          waitlistCancelBtn?.addEventListener('click', () => closeModal());
          waitlistModal.addEventListener('click', (event) => {
            if (event.target === waitlistModal) {
              closeModal();
            }
          });
          waitlistForm?.addEventListener('submit', (event) => {
            event.preventDefault();
            const email = waitlistEmail.value.trim();
            if (!email || !email.includes('@')) {
              waitlistMessage.textContent = 'Ingresa un correo válido.';
              waitlistMessage.classList.remove('text-emerald-300');
              waitlistMessage.classList.add('text-rose-300');
              return;
            }
            waitlistMessage.classList.remove('text-rose-300');
            waitlistMessage.classList.add('text-emerald-300');
            try {
              const stored = JSON.parse(localStorage.getItem(waitlistStorageKey)) || [];
              stored.push({ email, date: new Date().toISOString() });
              localStorage.setItem(waitlistStorageKey, JSON.stringify(stored));
              waitlistMessage.textContent = 'Te sumamos a la lista de espera PRO.';
              waitlistEmail.value = '';
            } catch (error) {
              waitlistMessage.textContent = 'No pudimos guardar tu correo. Intenta más tarde.';
              waitlistMessage.classList.remove('text-emerald-300');
              waitlistMessage.classList.add('text-rose-300');
            }
          });
        };

        // Inicio de la app
        const initApp = () => {
          initFooterYear();
          initSmoothScroll();
          initSectionAnimations();
          initMobileMenu();
          initFAQ();
          initTemplates();
          initFormPlan();
          initCopySummary();
          initLocalPlans();
          initCloudPlans();
          initAuthModals();
          initAuthState();
          initProWaitlistModal();
          setPlanDefaultMessage();
        };

        initApp();
      })();
    </script>

  </body>
</html>
