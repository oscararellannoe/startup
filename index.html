<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Life Organizer – Organiza dinero, tiempo y hábitos con IA</title>
    <meta
      name="description"
      content="Genera un plan personalizado que alinea tus finanzas, hábitos y agenda en minutos con AI Life Organizer."
    />
    <meta name="robots" content="index,follow" />
    <meta property="og:title" content="AI Life Organizer – Organiza dinero, tiempo y hábitos con IA" />
    <meta
      property="og:description"
      content="Crea un plan completo que ordena tu dinero, horarios y hábitos en minutos con inteligencia artificial."
    />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://ailifeorganizer.com" />
    <meta property="og:image" content="https://ailifeorganizer.com/preview.png" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="AI Life Organizer – Organiza dinero, tiempo y hábitos con IA" />
    <meta
      name="twitter:description"
      content="Crea un plan completo que ordena tu dinero, horarios y hábitos en minutos con inteligencia artificial."
    />
    <meta name="twitter:image" content="https://ailifeorganizer.com/preview.png" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "AI Life Organizer",
        "description": "Herramienta web que organiza dinero, tiempo y hábitos con inteligencia artificial",
        "applicationCategory": "ProductivityApplication",
        "operatingSystem": "Web",
        "offers": {
          "@type": "Offer",
          "price": "9.00",
          "priceCurrency": "USD"
        }
      }
    </script>
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
          {
            "@type": "Question",
            "name": "¿Necesito datos exactos para generar un plan?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "No. Con aproximaciones de ingresos, gastos y horarios la IA puede armar recomendaciones útiles que luego podrás ajustar."
            }
          },
          {
            "@type": "Question",
            "name": "¿Dónde se guardan mis planes?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Tus planes se guardan únicamente en tu navegador mediante almacenamiento local. Nadie más puede verlos."
            }
          },
          {
            "@type": "Question",
            "name": "¿Puedo actualizar el plan cuando cambie mi vida?",
            "acceptedAnswer": {
              "@type": "Answer",
              "text": "Sí. Puedes editar los campos y generar nuevos planes ilimitadas veces cuando cambien tus prioridades."
            }
          }
        ]
      }
    </script>
    <style>
      body {
        font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      }
      body.modal-open {
        overflow: hidden;
      }
    </style>
  </head>
  <body class="bg-[#030712] text-slate-200">
    <div class="relative">
      <header class="sticky top-0 z-30 border-b border-white/5 bg-[#030712]/90 backdrop-blur">
        <div class="mx-auto flex max-w-6xl items-center justify-between px-4 py-4 sm:px-6 lg:px-8">
          <a href="#inicio" class="text-lg font-semibold text-white">AI Life Organizer</a>
          <nav class="hidden items-center gap-6 text-sm text-slate-300 md:flex">
            <a class="nav-link hover:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500" href="#como">Cómo funciona</a>
            <a class="nav-link hover:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500" href="#beneficios">Beneficios</a>
            <a class="nav-link hover:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500" href="#app">App</a>
            <a class="nav-link hover:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500" href="#planes">Planes</a>
            <a class="nav-link hover:text-white focus:outline-none focus:ring-2 focus:ring-indigo-500" href="#faq">FAQ</a>
          </nav>
          <div class="flex items-center gap-3">
            <div class="hidden flex-col text-right text-xs text-slate-300 sm:flex" id="authUserBadge">
              <span class="text-[11px] uppercase tracking-[0.2em] text-slate-500">Sesión activa</span>
              <span class="font-medium text-white">Hola, <span id="authEmailDisplay"></span></span>
            </div>
            <button
              id="authTrigger"
              type="button"
              aria-haspopup="dialog"
              class="inline-flex items-center justify-center rounded-full border border-white/15 bg-white/5 px-4 py-2 text-sm text-slate-200 transition hover:bg-white/10"
            >Iniciar sesión</button>
            <button
              id="logoutButton"
              type="button"
              class="hidden inline-flex items-center justify-center rounded-full border border-white/15 bg-white/5 px-4 py-2 text-sm text-slate-200 transition hover:bg-white/10"
            >Cerrar sesión</button>
            <button
              id="mobile-menu-button"
              class="inline-flex items-center justify-center rounded-full border border-white/15 bg-white/5 p-2 text-slate-200 transition hover:bg-white/10 md:hidden"
              aria-label="Abrir menú de navegación"
              aria-expanded="false"
              aria-controls="mobile-menu"
            >
              <svg class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
              </svg>
            </button>
          </div>
        </div>
        <div id="mobile-menu" class="hidden border-t border-white/5 bg-[#050816] md:hidden" role="menu">
          <div class="space-y-1 px-4 py-4 text-sm">
            <a class="nav-link block rounded-lg px-3 py-2 text-slate-300 hover:bg-white/5 focus:outline-none focus:ring-2 focus:ring-indigo-500" href="#como">Cómo funciona</a>
            <a class="nav-link block rounded-lg px-3 py-2 text-slate-300 hover:bg-white/5 focus:outline-none focus:ring-2 focus:ring-indigo-500" href="#beneficios">Beneficios</a>
            <a class="nav-link block rounded-lg px-3 py-2 text-slate-300 hover:bg-white/5 focus:outline-none focus:ring-2 focus:ring-indigo-500" href="#app">App</a>
            <a class="nav-link block rounded-lg px-3 py-2 text-slate-300 hover:bg-white/5 focus:outline-none focus:ring-2 focus:ring-indigo-500" href="#planes">Planes</a>
            <a class="nav-link block rounded-lg px-3 py-2 text-slate-300 hover:bg-white/5 focus:outline-none focus:ring-2 focus:ring-indigo-500" href="#faq">FAQ</a>
          </div>
        </div>
      </header>

      <main id="inicio" class="space-y-24 py-16">
        <!-- Hero -->
        <section class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
          <div class="grid gap-10 lg:grid-cols-2 lg:items-center">
            <div class="space-y-6">
              <p class="text-sm font-semibold uppercase tracking-[0.2em] text-indigo-300">Organiza tu vida en minutos</p>
              <h1 class="text-4xl font-semibold text-white sm:text-5xl">
                Dinero, tiempo y hábitos en un panel inteligente
              </h1>
              <p class="text-base text-slate-400">
                AI Life Organizer transforma números sueltos y rutinas caóticas en un plan accionable con bloques de tiempo, hábitos clave y prioridades semanales.
              </p>
              <div class="flex flex-wrap gap-3">
                <a
                  href="#app"
                  class="inline-flex items-center justify-center rounded-full bg-indigo-500 px-5 py-2.5 text-sm font-medium text-white shadow-lg shadow-indigo-500/30 transition hover:scale-[1.02] hover:bg-indigo-400 active:scale-[0.98]"
                >Generar mi plan</a>
                <a
                  href="#planes"
                  class="inline-flex items-center justify-center rounded-full border border-white/15 bg-white/5 px-4 py-2 text-sm text-slate-200 transition hover:bg-white/10"
                >Ver planes</a>
              </div>
              <div class="flex flex-wrap gap-6 text-sm text-slate-400">
                <div>
                  <p class="text-2xl font-semibold text-white">+4,700</p>
                  <p>Planes generados</p>
                </div>
                <div>
                  <p class="text-2xl font-semibold text-white">12 min</p>
                  <p>Promedio para comenzar</p>
                </div>
                <div>
                  <p class="text-2xl font-semibold text-white">24/7</p>
                  <p>Disponible donde estés</p>
                </div>
              </div>
            </div>
            <div class="rounded-3xl border border-white/10 bg-gradient-to-br from-indigo-500/10 via-sky-500/10 to-emerald-500/10 p-6">
              <div class="rounded-2xl border border-white/10 bg-[#050816] p-6">
                <p class="text-sm uppercase tracking-[0.3em] text-indigo-300">Vista previa</p>
                <h3 class="mt-3 text-2xl font-semibold text-white">Panel de claridad</h3>
                <p class="mt-2 text-sm text-slate-400">
                  Resultados accionables con distribución de ingresos, hábitos clave y bloques de tiempo listos para usar.
                </p>
                <div class="mt-6 space-y-4 text-sm">
                  <div class="rounded-2xl border border-white/10 bg-white/5 p-4">
                    <p class="text-xs text-slate-400">Resumen financiero</p>
                    <p class="text-base text-white">Ahorra 18% del ingreso reorganizando gasto variable.</p>
                  </div>
                  <div class="rounded-2xl border border-white/10 bg-white/5 p-4">
                    <p class="text-xs text-slate-400">Bloques de tiempo</p>
                    <p class="text-base text-white">Planifica mañanas creativas y tardes de ejecución.</p>
                  </div>
                  <div class="rounded-2xl border border-white/10 bg-white/5 p-4">
                    <p class="text-xs text-slate-400">Hábitos clave</p>
                    <p class="text-base text-white">Rutinas mínimas para estirar energía durante la semana.</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Cómo funciona -->
        <section id="como" class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
          <div class="space-y-3 text-center">
            <p class="text-sm font-semibold text-indigo-300">Proceso simple</p>
            <h2 class="text-3xl font-semibold text-white">Cómo funciona AI Life Organizer</h2>
            <p class="text-base text-slate-400">Solo tres pasos para recuperar claridad mental.</p>
          </div>
          <div class="mt-12 grid gap-6 sm:grid-cols-3">
            <div class="rounded-3xl border border-white/10 bg-[#050816] p-6">
              <div class="mb-4 inline-flex h-11 w-11 items-center justify-center rounded-2xl bg-white/5 text-sm font-semibold text-white">1</div>
              <h3 class="text-lg font-medium text-white">Cuéntanos tu contexto</h3>
              <p class="mt-2 text-sm text-slate-400">Ingresos, gastos, metas, tiempo disponible y nivel de caos actual.</p>
            </div>
            <div class="rounded-3xl border border-white/10 bg-[#050816] p-6">
              <div class="mb-4 inline-flex h-11 w-11 items-center justify-center rounded-2xl bg-white/5 text-sm font-semibold text-white">2</div>
              <h3 class="text-lg font-medium text-white">La IA arma tu plan</h3>
              <p class="mt-2 text-sm text-slate-400">Ordena dinero, hábitos y bloques de tiempo con lógica clara.</p>
            </div>
            <div class="rounded-3xl border border-white/10 bg-[#050816] p-6">
              <div class="mb-4 inline-flex h-11 w-11 items-center justify-center rounded-2xl bg-white/5 text-sm font-semibold text-white">3</div>
              <h3 class="text-lg font-medium text-white">Aplica y ajusta</h3>
              <p class="mt-2 text-sm text-slate-400">Repite el proceso cuando cambien tus prioridades.</p>
            </div>
          </div>
        </section>

        <!-- Beneficios -->
        <section id="beneficios" class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
          <div class="space-y-3 text-center">
            <p class="text-sm font-semibold text-indigo-300">Para personas reales</p>
            <h2 class="text-3xl font-semibold text-white">Beneficios inmediatos</h2>
            <p class="text-base text-slate-400">Centraliza dinero, energía y horarios en un tablero accionable.</p>
          </div>
          <div class="mt-12 grid gap-6 sm:grid-cols-2">
            <article class="rounded-3xl border border-white/10 bg-[#050816] p-6">
              <h3 class="text-lg font-semibold text-white">Unifica información crítica</h3>
              <p class="mt-2 text-sm text-slate-400">Finanzas, metas y hábitos conviven para que decidas rápido.</p>
            </article>
            <article class="rounded-3xl border border-white/10 bg-[#050816] p-6">
              <h3 class="text-lg font-semibold text-white">Lenguaje claro en español</h3>
              <p class="mt-2 text-sm text-slate-400">Sin tecnicismos, solo acciones que puedes ejecutar hoy.</p>
            </article>
            <article class="rounded-3xl border border-white/10 bg-[#050816] p-6">
              <h3 class="text-lg font-semibold text-white">Recomendaciones vivas</h3>
              <p class="mt-2 text-sm text-slate-400">Genera nuevos planes cuando cambie tu vida o tus números.</p>
            </article>
            <article class="rounded-3xl border border-white/10 bg-[#050816] p-6">
              <h3 class="text-lg font-semibold text-white">Modo a prueba de caos</h3>
              <p class="mt-2 text-sm text-slate-400">Detecta cuellos de botella y sugiere descansos y bloques realistas.</p>
            </article>
          </div>
        </section>

        <!-- App -->
        <section id="app" class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
          <div class="space-y-3 text-center">
            <p class="text-sm font-semibold text-indigo-300">Tu tablero personal</p>
            <h2 class="text-3xl font-semibold text-white">Crea un plan en 3 minutos</h2>
            <p class="text-base text-slate-400">Completa los campos una vez, guarda múltiples planes y vuelve cuando quieras.</p>
          </div>
          <div class="mt-10 grid gap-8 lg:grid-cols-2">
            <div>
              <div class="mb-5 flex flex-wrap gap-2">
                <button
                  type="button"
                  class="template-chip inline-flex items-center rounded-full bg-white/5 px-3 py-1 text-xs text-slate-200 transition hover:bg-white/10"
                  data-ingresos="2800"
                  data-gastos="2100"
                  data-metas="Ahorrar para actividades escolares, cocinar saludable 3 veces por semana, tener tiempo de lectura personal"
                  data-horario="30 minutos temprano, 1 hora a la hora de la siesta, bloques cortos fines de semana"
                  data-area="Tiempo"
                  data-caos="Mi agenda es impredecible pero quiero orden"
                >Plantilla mamá ocupada</button>
                <button
                  type="button"
                  class="template-chip inline-flex items-center rounded-full bg-white/5 px-3 py-1 text-xs text-slate-200 transition hover:bg-white/10"
                  data-ingresos="6500"
                  data-gastos="4300"
                  data-metas="Escalar ventas mensuales, cuidar salud, reservar tardes para networking"
                  data-horario="Bloques de enfoque 7-10am, reuniones flexibles tarde, revisión estratégica domingo"
                  data-area="Dinero"
                  data-caos="Vivo apagando incendios cada semana"
                >Plantilla emprendedor</button>
                <button
                  type="button"
                  class="template-chip inline-flex items-center rounded-full bg-white/5 px-3 py-1 text-xs text-slate-200 transition hover:bg-white/10"
                  data-ingresos="1200"
                  data-gastos="900"
                  data-metas="Terminar tesis, entregar proyectos freelance, cuidar sueño"
                  data-horario="Mañanas libres martes y jueves, noches productivas, fines de semana parciales"
                  data-area="Hábitos"
                  data-caos="Me cuesta mantener una rutina estable"
                >Plantilla estudiante</button>
              </div>
              <form id="lifeForm" class="space-y-5 rounded-3xl border border-white/10 bg-[#050816] p-6">
                <div>
                  <label for="ingresos" class="text-sm text-slate-300">Ingresos mensuales estimados</label>
                  <input
                    id="ingresos"
                    type="number"
                    inputmode="decimal"
                    class="mt-2 w-full rounded-2xl border border-white/10 bg-transparent px-4 py-2 text-white focus:border-indigo-400 focus:outline-none"
                    placeholder="Ej. 3500"
                    required
                  />
                </div>
                <div>
                  <label for="gastos" class="text-sm text-slate-300">Gastos mensuales principales</label>
                  <input
                    id="gastos"
                    type="number"
                    inputmode="decimal"
                    class="mt-2 w-full rounded-2xl border border-white/10 bg-transparent px-4 py-2 text-white focus:border-indigo-400 focus:outline-none"
                    placeholder="Ej. 2400"
                    required
                  />
                </div>
                <div>
                  <label for="metas" class="text-sm text-slate-300">Metas prioritarias</label>
                  <textarea
                    id="metas"
                    rows="3"
                    class="mt-2 w-full rounded-2xl border border-white/10 bg-transparent px-4 py-2 text-white focus:border-indigo-400 focus:outline-none"
                    placeholder="Describe tus metas financieras, de salud o familia"
                  ></textarea>
                </div>
                <div>
                  <label for="horarioDisponible" class="text-sm text-slate-300">Horario disponible y compromisos</label>
                  <textarea
                    id="horarioDisponible"
                    rows="3"
                    class="mt-2 w-full rounded-2xl border border-white/10 bg-transparent px-4 py-2 text-white focus:border-indigo-400 focus:outline-none"
                    placeholder="Bloques libres, reuniones fijas, energía por momentos"
                  ></textarea>
                </div>
                <div>
                  <label for="areaMejorar" class="text-sm text-slate-300">Área a mejorar</label>
                  <select
                    id="areaMejorar"
                    class="mt-2 w-full rounded-2xl border border-white/10 bg-transparent px-4 py-2 text-white focus:border-indigo-400 focus:outline-none"
                  >
                    <option value="Dinero" class="bg-[#050816]">Dinero</option>
                    <option value="Tiempo" class="bg-[#050816]">Tiempo</option>
                    <option value="Hábitos" class="bg-[#050816]">Hábitos</option>
                    <option value="Energía" class="bg-[#050816]">Energía</option>
                    <option value="Familia" class="bg-[#050816]">Familia</option>
                  </select>
                </div>
                <div>
                  <label for="nivelCaos" class="text-sm text-slate-300">Nivel de caos actual</label>
                  <select
                    id="nivelCaos"
                    class="mt-2 w-full rounded-2xl border border-white/10 bg-transparent px-4 py-2 text-white focus:border-indigo-400 focus:outline-none"
                  >
                    <option value="Tranquilo, solo quiero optimizar" class="bg-[#050816]">Tranquilo, solo quiero optimizar</option>
                    <option value="Hay estrés constante" class="bg-[#050816]">Hay estrés constante</option>
                    <option value="Mi agenda es impredecible pero quiero orden" class="bg-[#050816]">Mi agenda es impredecible pero quiero orden</option>
                    <option value="Apagando incendios cada día" class="bg-[#050816]">Apagando incendios cada día</option>
                  </select>
                </div>
                <p id="form-error" class="hidden rounded-2xl bg-red-500/10 px-4 py-2 text-sm text-red-300"></p>
                <button
                  type="submit"
                  class="inline-flex w-full items-center justify-center rounded-full bg-indigo-500 px-5 py-2.5 text-sm font-medium text-white shadow-lg shadow-indigo-500/30 transition hover:scale-[1.02] hover:bg-indigo-400 active:scale-[0.98]"
                >Generar plan inteligente</button>
              </form>
            </div>
            <div class="space-y-5">
              <div class="rounded-3xl border border-white/10 bg-[#050816] p-6">
                <div class="flex items-center justify-between gap-4">
                  <h3 class="text-xl font-semibold text-white">Tu plan personalizado</h3>
                  <button
                    id="copySummary"
                    type="button"
                    class="text-xs text-indigo-300 hover:text-indigo-100 focus:outline-none"
                  >Copiar resumen</button>
                </div>
                <div class="mt-4 space-y-4 text-sm">
                  <div>
                    <p class="text-xs uppercase tracking-[0.25em] text-slate-400">Resumen financiero</p>
                    <p id="planFinanzas" class="mt-1 text-base text-white">Completa el formulario para recibir tu resumen financiero.</p>
                  </div>
                  <div>
                    <p class="text-xs uppercase tracking-[0.25em] text-slate-400">Plan de hábitos</p>
                    <p id="planHabitos" class="mt-1 text-base text-white">Aquí verás los hábitos que sostendrán tu plan.</p>
                  </div>
                  <div>
                    <p class="text-xs uppercase tracking-[0.25em] text-slate-400">Horario sugerido</p>
                    <p id="planHorario" class="mt-1 text-base text-white">Bloques de tiempo aparecerán tras generar tu plan.</p>
                  </div>
                  <div>
                    <p class="text-xs uppercase tracking-[0.25em] text-slate-400">Prioridades 7 días</p>
                    <p id="planSiete" class="mt-1 text-base text-white">Tus próximos pasos clave se mostrarán aquí.</p>
                  </div>
                </div>
                <p id="copyStatus" class="mt-3 hidden text-xs text-emerald-300"></p>
              </div>

              <div class="rounded-3xl border border-white/10 bg-[#050816] p-6">
                <h4 class="text-lg font-semibold text-white">Guardar este plan</h4>
                <p class="text-sm text-slate-400">Se guarda en este dispositivo o en tu cuenta.</p>
                <div class="mt-4 space-y-3">
                  <input
                    id="planName"
                    type="text"
                    placeholder="Nombre del plan"
                    class="w-full rounded-2xl border border-white/10 bg-transparent px-4 py-2 text-sm text-white focus:border-indigo-400 focus:outline-none"
                  />
                  <p id="planNameError" class="hidden text-xs text-red-300"></p>
                  <button
                    id="savePlan"
                    type="button"
                    class="inline-flex w-full items-center justify-center rounded-full border border-white/15 bg-white/5 px-4 py-2 text-sm text-slate-200 transition hover:bg-white/10"
                  >Guardar plan</button>
                </div>
              </div>

              <div class="rounded-3xl border border-white/10 bg-[#050816] p-6">
                <div class="flex items-center justify-between">
                  <h4 class="text-lg font-semibold text-white">Planes guardados</h4>
                </div>
                <div id="savedPlansList" class="mt-4 space-y-3 text-sm text-slate-300">
                  <p class="text-sm text-slate-400">Todavía no has guardado ningún plan.</p>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Casos reales -->
        <section id="casos" class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
          <div class="space-y-3 text-center">
            <p class="text-sm font-semibold text-indigo-300">Historias reales</p>
            <h2 class="text-3xl font-semibold text-white">Casos reales donde AI Life Organizer brilla</h2>
            <p class="text-base text-slate-400">No todos tienen la misma vida, pero todos merecen claridad.</p>
          </div>
          <div class="mt-12 grid gap-6 sm:grid-cols-3">
            <article class="rounded-3xl border border-white/10 bg-[#0b1020] p-5">
              <h3 class="text-lg font-semibold text-white">Ana, mamá que trabaja medio tiempo</h3>
              <p class="mt-2 text-sm text-slate-400">Divide su energía entre el trabajo, la casa y dos hijos curiosos.</p>
              <ul class="mt-3 list-disc space-y-1 pl-5 text-sm text-slate-300">
                <li>Visualiza gastos familiares versus actividades escolares.</li>
                <li>Encuentra bloques cortos para autocuidado y pareja.</li>
                <li>Planifica menús rápidos para optimizar compras.</li>
              </ul>
            </article>
            <article class="rounded-3xl border border-white/10 bg-[#0b1020] p-5">
              <h3 class="text-lg font-semibold text-white">Luis, emprendedor con horarios locos</h3>
              <p class="mt-2 text-sm text-slate-400">Alterna entre ventas, equipo remoto y viajes improvisados.</p>
              <ul class="mt-3 list-disc space-y-1 pl-5 text-sm text-slate-300">
                <li>Reordena pagos y reinversiones según flujo real.</li>
                <li>Bloquea mañanas de enfoque profundo y tardes comerciales.</li>
                <li>Detecta cuándo delegar para no apagar incendios solo.</li>
              </ul>
            </article>
            <article class="rounded-3xl border border-white/10 bg-[#0b1020] p-5">
              <h3 class="text-lg font-semibold text-white">María, estudiante y freelance</h3>
              <p class="mt-2 text-sm text-slate-400">Combina tesis, clientes y cuidado de su salud mental.</p>
              <ul class="mt-3 list-disc space-y-1 pl-5 text-sm text-slate-300">
                <li>Controla ingresos variables y crea colchón para imprevistos.</li>
                <li>Divide semanas entre investigación, clientes y descanso.</li>
                <li>Implementa rituales cortos para proteger su energía.</li>
              </ul>
            </article>
          </div>
          <div class="mt-10 space-y-4">
            <div class="rounded-3xl border border-white/10 bg-[#050816] p-5">
              <div class="space-y-3 border-l border-indigo-500/60 pl-4 text-sm">
                <p class="text-slate-200">“Nunca había visto mi dinero, hábitos y agenda alineados en una sola página.”</p>
                <p class="text-slate-400">— Julieta, consultora independiente</p>
              </div>
            </div>
            <div class="rounded-3xl border border-white/10 bg-[#050816] p-5">
              <div class="space-y-3 border-l border-indigo-500/60 pl-4 text-sm">
                <p class="text-slate-200">“Lo uso cada domingo para planear la semana sin sentir culpa por descansar.”</p>
                <p class="text-slate-400">— Diego, product manager</p>
              </div>
            </div>
          </div>
          <div class="mt-10 text-center">
            <p class="text-base text-slate-300">Prueba tu propio plan en 3 minutos.</p>
            <a
              href="#app"
              class="mt-4 inline-flex items-center justify-center rounded-full bg-indigo-500 px-5 py-2.5 text-sm font-medium text-white shadow-lg shadow-indigo-500/30 transition hover:scale-[1.02] hover:bg-indigo-400 active:scale-[0.98]"
            >Ir al generador</a>
          </div>
        </section>

        <!-- Planes -->
        <section id="planes" class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
          <div class="space-y-3 text-center">
            <p class="text-sm font-semibold text-indigo-300">Elige tu ritmo</p>
            <h2 class="text-3xl font-semibold text-white">Planes simples y transparentes</h2>
            <p class="text-base text-slate-400">Accede hoy gratis o reserva funciones PRO en la lista de espera.</p>
          </div>
          <div class="mt-12 grid gap-6 lg:grid-cols-2">
            <div class="rounded-3xl border border-white/10 bg-[#050816] p-6">
              <p class="text-sm text-indigo-300">Starter</p>
              <h3 class="mt-3 text-2xl font-semibold text-white">Plan Gratuito</h3>
              <p class="mt-2 text-sm text-slate-400">Genera planes ilimitados, guarda en tu dispositivo y copia resúmenes.</p>
              <p class="mt-6 text-4xl font-semibold text-white">$0</p>
              <ul class="mt-6 space-y-2 text-sm text-slate-300">
                <li>✔️ Generador ilimitado</li>
                <li>✔️ Plantillas rápidas</li>
                <li>✔️ Guardado local</li>
              </ul>
              <div class="mt-8">
                <a
                  href="#app"
                  class="inline-flex w-full items-center justify-center rounded-full border border-white/15 bg-white/5 px-4 py-2 text-sm text-slate-200 transition hover:bg-white/10"
                >Empieza gratis</a>
              </div>
            </div>
            <div class="rounded-3xl border border-indigo-500/40 bg-gradient-to-b from-indigo-500/10 via-transparent to-transparent p-6">
              <p class="text-sm text-indigo-300">PRO</p>
              <h3 class="mt-3 text-2xl font-semibold text-white">Plan PRO (beta)</h3>
              <p class="mt-2 text-sm text-slate-300">Acceso temprano a historial en la nube, plantillas colaborativas y analítica avanzada.</p>
              <p class="mt-6 text-4xl font-semibold text-white">$9<span class="text-base text-slate-400">/mes</span></p>
              <ul class="mt-6 space-y-2 text-sm text-slate-200">
                <li>⭐ Historial multiplataforma</li>
                <li>⭐ Alertas inteligentes</li>
                <li>⭐ Integraciones con calendario</li>
              </ul>
              <div class="mt-8">
                <button
                  id="open-waitlist"
                  type="button"
                  class="inline-flex w-full items-center justify-center rounded-full bg-indigo-500 px-5 py-2.5 text-sm font-medium text-white shadow-lg shadow-indigo-500/30 transition hover:scale-[1.02] hover:bg-indigo-400 active:scale-[0.98]"
                >Unirme a la lista de espera</button>
              </div>
            </div>
          </div>
        </section>

        <!-- FAQ -->
        <section id="faq" class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
          <div class="space-y-3 text-center">
            <p class="text-sm font-semibold text-indigo-300">Preguntas frecuentes</p>
            <h2 class="text-3xl font-semibold text-white">Todo lo que necesitas saber</h2>
            <p class="text-base text-slate-400">Transparencia total para que tomes la mejor decisión.</p>
          </div>
          <div class="mt-10 space-y-4">
            <div class="rounded-3xl border border-white/10 bg-[#050816]">
              <button
                type="button"
                class="faq-button flex w-full items-center justify-between px-6 py-4 text-left text-base text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"
                aria-expanded="false"
                aria-controls="faq-1"
              >
                ¿Necesito datos exactos para generar un plan?
                <span class="text-indigo-300">+</span>
              </button>
              <div id="faq-1" class="faq-content hidden border-t border-white/5 px-6 py-4 text-sm text-slate-300">
                No. Con aproximaciones de ingresos, gastos y horarios la IA puede armar recomendaciones útiles que luego podrás ajustar.
              </div>
            </div>
            <div class="rounded-3xl border border-white/10 bg-[#050816]">
              <button
                type="button"
                class="faq-button flex w-full items-center justify-between px-6 py-4 text-left text-base text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"
                aria-expanded="false"
                aria-controls="faq-2"
              >
                ¿Dónde se guardan mis planes?
                <span class="text-indigo-300">+</span>
              </button>
              <div id="faq-2" class="faq-content hidden border-t border-white/5 px-6 py-4 text-sm text-slate-300">
                Tus planes se guardan únicamente en tu navegador mediante almacenamiento local. Nadie más puede verlos.
              </div>
            </div>
            <div class="rounded-3xl border border-white/10 bg-[#050816]">
              <button
                type="button"
                class="faq-button flex w-full items-center justify-between px-6 py-4 text-left text-base text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"
                aria-expanded="false"
                aria-controls="faq-3"
              >
                ¿Puedo actualizar el plan cuando cambie mi vida?
                <span class="text-indigo-300">+</span>
              </button>
              <div id="faq-3" class="faq-content hidden border-t border-white/5 px-6 py-4 text-sm text-slate-300">
                Sí. Puedes editar los campos y generar nuevos planes ilimitadas veces cuando cambien tus prioridades.
              </div>
            </div>
          </div>
        </section>
      </main>

      <footer class="border-t border-white/5 bg-[#030712]">
        <div class="mx-auto flex max-w-6xl flex-col items-center justify-between gap-4 px-4 py-8 text-sm text-slate-400 sm:flex-row sm:px-6 lg:px-8">
          <p>© <span id="year"></span> AI Life Organizer. Todos los derechos reservados.</p>
          <div class="flex gap-4">
            <a href="#planes" class="hover:text-white">Planes</a>
            <a href="#faq" class="hover:text-white">FAQ</a>
            <a href="#app" class="hover:text-white">Generar plan</a>
          </div>
        </div>
      </footer>
    </div>

    <!-- Modal lista de espera PRO -->
    <div
      id="authModalOverlay"
      class="fixed inset-0 z-40 hidden items-center justify-center bg-black/60 p-4"
    >
      <div
        id="authModal"
        role="dialog"
        aria-modal="true"
        class="max-w-md w-full rounded-3xl border border-white/10 bg-[#050816] p-6 shadow-2xl"
      >
        <div class="flex items-center justify-between gap-4">
          <div>
            <p class="text-xs uppercase tracking-[0.3em] text-indigo-300">Acceso privado</p>
            <h3 class="text-xl font-semibold text-white">Inicia sesión o crea tu cuenta</h3>
          </div>
          <button id="authClose" class="text-slate-400 transition hover:text-white" aria-label="Cerrar modal">✕</button>
        </div>
        <div class="mt-4 flex gap-2 rounded-2xl border border-white/5 bg-white/5 p-1 text-sm">
          <button
            type="button"
            data-auth-tab="login"
            class="auth-tab flex-1 rounded-2xl bg-white/10 px-3 py-2 font-medium text-white"
          >Iniciar sesión</button>
          <button
            type="button"
            data-auth-tab="register"
            class="auth-tab flex-1 rounded-2xl px-3 py-2 font-medium text-slate-400 hover:text-white"
          >Crear cuenta</button>
        </div>
        <form id="authForm" class="mt-6 space-y-4">
          <div>
            <label for="authEmail" class="text-sm text-slate-300">Correo electrónico</label>
            <input
              id="authEmail"
              type="email"
              required
              class="mt-2 w-full rounded-2xl border border-white/10 bg-transparent px-4 py-2 text-white focus:border-indigo-400 focus:outline-none"
              placeholder="tucorreo@email.com"
            />
          </div>
          <div>
            <label for="authPassword" class="text-sm text-slate-300">Contraseña</label>
            <input
              id="authPassword"
              type="password"
              required
              class="mt-2 w-full rounded-2xl border border-white/10 bg-transparent px-4 py-2 text-white focus:border-indigo-400 focus:outline-none"
              placeholder="********"
            />
          </div>
          <button
            id="authSubmit"
            type="submit"
            class="inline-flex w-full items-center justify-center rounded-full bg-indigo-500 px-5 py-2.5 text-sm font-medium text-white shadow-lg shadow-indigo-500/30 transition hover:scale-[1.02] hover:bg-indigo-400 active:scale-[0.98]"
          >Iniciar sesión</button>
          <p id="authError" class="hidden text-xs text-red-300"></p>
          <p id="authSuccess" class="hidden text-xs text-emerald-300"></p>
          <button
            type="button"
            id="authCancel"
            class="mt-2 inline-flex w-full items-center justify-center rounded-full border border-white/15 bg-white/5 px-4 py-2 text-sm text-slate-200 transition hover:bg-white/10"
          >Cerrar</button>
        </form>
      </div>
    </div>

    <div id="waitlist-modal" class="fixed inset-0 z-40 hidden items-center justify-center bg-black/60 p-4">
      <div class="max-w-md w-full rounded-3xl border border-white/10 bg-[#050816] p-6 shadow-2xl">
        <div class="flex items-start justify-between">
          <div>
            <p class="text-sm text-indigo-300">Beta privada</p>
            <h3 class="mt-1 text-2xl font-semibold text-white">Unirte a la lista de espera PRO</h3>
          </div>
          <button id="close-waitlist" class="text-slate-400 hover:text-white" aria-label="Cerrar modal">✕</button>
        </div>
        <p class="mt-4 text-sm text-slate-400">
          Próximamente desbloquearemos historial en la nube, modos colaborativos e integraciones con tus herramientas favoritas.
        </p>
        <form id="waitlist-form" class="mt-6 space-y-3">
          <input
            id="waitlist-email"
            type="email"
            placeholder="tu@correo.com"
            class="w-full rounded-2xl border border-white/10 bg-transparent px-4 py-2 text-sm text-white focus:border-indigo-400 focus:outline-none"
            required
          />
          <button
            type="submit"
            class="inline-flex w-full items-center justify-center rounded-full bg-indigo-500 px-5 py-2.5 text-sm font-medium text-white shadow-lg shadow-indigo-500/30 transition hover:scale-[1.02] hover:bg-indigo-400 active:scale-[0.98]"
          >Guardar mi lugar</button>
          <p id="waitlist-message" class="text-xs text-emerald-300"></p>
          <button
            id="waitlist-cancel"
            type="button"
            class="inline-flex w-full items-center justify-center rounded-full border border-white/15 bg-white/5 px-4 py-2 text-sm text-slate-200 transition hover:bg-white/10"
          >Cerrar</button>
        </form>
      </div>
    </div>

    <script>
      (() => {
        // --- Supabase config (el usuario reemplaza valores reales) ---
        const SUPABASE_URL = "https://TU-PROJECT-ID.supabase.co"; // TODO: reemplazar por el real
        const SUPABASE_ANON_KEY = "TU-ANON-KEY"; // TODO: reemplazar por el real
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        const isSupabaseConfigured =
          !SUPABASE_URL.includes('TU-PROJECT-ID') && !SUPABASE_ANON_KEY.includes('TU-ANON-KEY');
        if (!isSupabaseConfigured) {
          console.info('Configura SUPABASE_URL y SUPABASE_ANON_KEY para activar el modo con cuenta.');
        }

        // Supabase - Tablas sugeridas:
        //
        // 1) Tabla "plans":
        //    - id: uuid (primary key, default uuid_generate_v4())
        //    - user_id: uuid (FK a auth.users.id)
        //    - name: text
        //    - inputs_json: jsonb  // { ingresos, gastos, metas, horarioDisponible, areaMejorar, nivelCaos }
        //    - outputs_json: jsonb // { planFinanzas, planHabitos, planHorario, planSieteDias }
        //    - created_at: timestamptz (default now())
        //    - updated_at: timestamptz (default now())
        //
        // El usuario debe crear esta tabla manualmente en Supabase (SQL o UI).

        // Selectores globales
        const navLinks = document.querySelectorAll('.nav-link');
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        const lifeForm = document.getElementById('lifeForm');
        const formError = document.getElementById('form-error');
        const planFinanzas = document.getElementById('planFinanzas');
        const planHabitos = document.getElementById('planHabitos');
        const planHorario = document.getElementById('planHorario');
        const planSiete = document.getElementById('planSiete');
        const planNameInput = document.getElementById('planName');
        const planNameError = document.getElementById('planNameError');
        const savePlanBtn = document.getElementById('savePlan');
        const savedPlansContainer = document.getElementById('savedPlansList');
        const copySummaryBtn = document.getElementById('copySummary');
        const copyStatus = document.getElementById('copyStatus');
        const templateChips = document.querySelectorAll('.template-chip');
        const waitlistModal = document.getElementById('waitlist-modal');
        const openWaitlistBtn = document.getElementById('open-waitlist');
        const closeWaitlistBtn = document.getElementById('close-waitlist');
        const waitlistForm = document.getElementById('waitlist-form');
        const waitlistEmail = document.getElementById('waitlist-email');
        const waitlistMessage = document.getElementById('waitlist-message');
        const waitlistCancelBtn = document.getElementById('waitlist-cancel');
        const authTrigger = document.getElementById('authTrigger');
        const authUserBadge = document.getElementById('authUserBadge');
        const authEmailDisplay = document.getElementById('authEmailDisplay');
        const logoutButton = document.getElementById('logoutButton');
        const authModalOverlay = document.getElementById('authModalOverlay');
        const authTabs = document.querySelectorAll('[data-auth-tab]');
        const authForm = document.getElementById('authForm');
        const authEmail = document.getElementById('authEmail');
        const authPassword = document.getElementById('authPassword');
        const authSubmit = document.getElementById('authSubmit');
        const authError = document.getElementById('authError');
        const authSuccess = document.getElementById('authSuccess');
        const authClose = document.getElementById('authClose');
        const authCancel = document.getElementById('authCancel');

        const plansStorageKey = 'aiLifeOrganizerPlans';
        const waitlistStorageKey = 'aiLifeOrganizerWaitlist';
        let savedPlans = [];
        let lastGeneratedPlan = null;
        let currentUser = null;
        let authMode = 'login';
        let planListenersReady = false;

        const updateBodyModalState = () => {
          const waitlistVisible = waitlistModal && !waitlistModal.classList.contains('hidden');
          const authVisible = authModalOverlay && !authModalOverlay.classList.contains('hidden');
          if (waitlistVisible || authVisible) {
            document.body.classList.add('modal-open');
          } else {
            document.body.classList.remove('modal-open');
          }
        };

        // --- Utilidades ---
        const initFooterYear = () => {
          const yearEl = document.getElementById('year');
          if (yearEl) {
            yearEl.textContent = new Date().getFullYear();
          }
        };

        const smoothScrollTo = (target) => {
          const element = document.querySelector(target);
          if (!element) return;
          element.scrollIntoView({ behavior: 'smooth', block: 'start' });
        };

        // --- Navegación y animaciones ---
        const initSmoothScroll = () => {
          navLinks.forEach((link) => {
            link.addEventListener('click', (event) => {
              const href = link.getAttribute('href');
              if (href && href.startsWith('#')) {
                event.preventDefault();
                smoothScrollTo(href);
                mobileMenu.classList.add('hidden');
                mobileMenuButton.setAttribute('aria-expanded', 'false');
              }
            });
          });
        };

        const initSectionAnimations = () => {
          const sections = document.querySelectorAll('main section');
          const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
          if (prefersReducedMotion || !sections.length) return;
          const observer = new IntersectionObserver(
            (entries) => {
              entries.forEach((entry) => {
                if (entry.isIntersecting) {
                  entry.target.style.opacity = '1';
                  entry.target.style.transform = 'translateY(0)';
                  observer.unobserve(entry.target);
                }
              });
            },
            { threshold: 0.15 }
          );
          sections.forEach((section) => {
            section.style.opacity = '0';
            section.style.transform = 'translateY(24px)';
            section.style.transition = 'opacity 0.6s ease-out, transform 0.6s ease-out';
            observer.observe(section);
          });
        };

        const initMobileMenu = () => {
          mobileMenuButton.addEventListener('click', () => {
            const isHidden = mobileMenu.classList.toggle('hidden');
            mobileMenuButton.setAttribute('aria-expanded', (!isHidden).toString());
          });
          document.addEventListener('click', (event) => {
            if (!mobileMenu.contains(event.target) && !mobileMenuButton.contains(event.target)) {
              mobileMenu.classList.add('hidden');
              mobileMenuButton.setAttribute('aria-expanded', 'false');
            }
          });
        };

        const initFAQ = () => {
          document.querySelectorAll('.faq-button').forEach((button) => {
            button.addEventListener('click', () => {
              const contentId = button.getAttribute('aria-controls');
              const content = document.getElementById(contentId);
              const isExpanded = button.getAttribute('aria-expanded') === 'true';
              button.setAttribute('aria-expanded', (!isExpanded).toString());
              content.classList.toggle('hidden');
              const indicator = button.querySelector('span');
              if (indicator) {
                indicator.textContent = isExpanded ? '+' : '−';
              }
            });
          });
        };

        // --- Plantillas rápidas ---
        const fillFormInputs = ({ ingresos, gastos, metas, horario, area, caos }) => {
          document.getElementById('ingresos').value = ingresos || '';
          document.getElementById('gastos').value = gastos || '';
          document.getElementById('metas').value = metas || '';
          document.getElementById('horarioDisponible').value = horario || '';
          document.getElementById('areaMejorar').value = area || 'Dinero';
          document.getElementById('nivelCaos').value = caos || 'Tranquilo, solo quiero optimizar';
        };

        const initTemplates = () => {
          templateChips.forEach((chip) => {
            chip.addEventListener('click', () => {
              fillFormInputs({
                ingresos: chip.dataset.ingresos,
                gastos: chip.dataset.gastos,
                metas: chip.dataset.metas,
                horario: chip.dataset.horario,
                area: chip.dataset.area,
                caos: chip.dataset.caos,
              });
              formError.classList.add('hidden');
            });
          });
        };

        // --- Generación del plan ---
        const collectFormValues = () => ({
          ingresos: document.getElementById('ingresos').value.trim(),
          gastos: document.getElementById('gastos').value.trim(),
          metas: document.getElementById('metas').value.trim(),
          horarioDisponible: document.getElementById('horarioDisponible').value.trim(),
          areaMejorar: document.getElementById('areaMejorar').value,
          nivelCaos: document.getElementById('nivelCaos').value,
        });

        const validateValues = (values) => {
          if (!values.ingresos || !values.gastos) {
            return 'Por favor ingresa tus ingresos y gastos estimados.';
          }
          if (Number(values.ingresos) < Number(values.gastos)) {
            return 'Tus gastos superan los ingresos. Informa si es correcto para ajustar el plan.';
          }
          return '';
        };

        const generatePlanOutputs = (values) => {
          const ingresosNum = Number(values.ingresos) || 0;
          const gastosNum = Number(values.gastos) || 0;
          const ahorro = Math.max(ingresosNum - gastosNum, 0);
          const porcentajeAhorro = ingresosNum ? Math.round((ahorro / ingresosNum) * 100) : 0;

          const planFinanzasText = `Destina ${porcentajeAhorro}% (${ahorro.toLocaleString('es-ES')} unidades) a un fondo objetivo y revisa las categorías variables cada viernes para alinear tu foco en ${values.areaMejorar.toLowerCase()}.`;

          const planHabitosText = `Integra hábitos ancla relacionados con "${values.metas || 'tus metas clave'}": check-in financiero de 10 min, ritual de energía al despertar y cierre de jornada con respiraciones para bajar el nivel de caos (${values.nivelCaos.toLowerCase()}).`;

          const planHorarioText = `Aprovecha el horario disponible descrito (${values.horarioDisponible || 'bloques libres'}) para crear bloques temáticos: foco profundo al iniciar el día, ejecución táctica por la tarde y revisión ligera nocturna.`;

          const planSieteText = `Próximos 7 días: 1) Consolidar presupuesto simplificado, 2) Reservar bloques irrenunciables para ${values.areaMejorar.toLowerCase()}, 3) Dedicar una micro victoria diaria alineada a ${values.metas || 'tu objetivo principal'}.`;

          return {
            planFinanzas: planFinanzasText,
            planHabitos: planHabitosText,
            planHorario: planHorarioText,
            planSieteDias: planSieteText,
          };
        };

        const updatePlanOutputs = (outputs) => {
          planFinanzas.textContent = outputs.planFinanzas || 'Completa el formulario para recibir tu resumen financiero.';
          planHabitos.textContent = outputs.planHabitos || 'Aquí verás los hábitos que sostendrán tu plan.';
          planHorario.textContent = outputs.planHorario || 'Bloques de tiempo aparecerán tras generar tu plan.';
          planSiete.textContent = outputs.planSieteDias || 'Tus próximos pasos clave se mostrarán aquí.';
        };

        const initFormPlan = () => {
          lifeForm.addEventListener('submit', (event) => {
            event.preventDefault();
            const values = collectFormValues();
            const validationMessage = validateValues(values);
            if (validationMessage) {
              formError.textContent = validationMessage;
              formError.classList.remove('hidden');
              return;
            }
            formError.classList.add('hidden');
            const outputs = generatePlanOutputs(values);
            updatePlanOutputs(outputs);
            lastGeneratedPlan = { inputs: values, outputs };
            copyStatus.classList.add('hidden');
          });
        };

        // --- Copiar resumen ---
        const initCopySummary = () => {
          copySummaryBtn.addEventListener('click', async () => {
            if (!lastGeneratedPlan) {
              copyStatus.textContent = 'Genera un plan antes de copiar el resumen.';
              copyStatus.classList.remove('hidden');
              copyStatus.classList.remove('text-emerald-300');
              copyStatus.classList.add('text-red-300');
              return;
            }
            const summaryText = `Mi plan generado por AI Life Organizer

Resumen financiero: ${planFinanzas.textContent}

Plan de hábitos: ${planHabitos.textContent}

Horario sugerido: ${planHorario.textContent}

Prioridades 7 días: ${planSiete.textContent}`;
            try {
              await navigator.clipboard.writeText(summaryText);
              copyStatus.textContent = 'Resumen copiado al portapapeles.';
              copyStatus.classList.remove('hidden');
              copyStatus.classList.remove('text-red-300');
              copyStatus.classList.add('text-emerald-300');
              setTimeout(() => copyStatus.classList.add('hidden'), 3000);
            } catch (error) {
              copyStatus.textContent = 'No se pudo copiar el resumen. Intenta manualmente.';
              copyStatus.classList.remove('hidden');
              copyStatus.classList.remove('text-emerald-300');
              copyStatus.classList.add('text-red-300');
            }
          });
        };

        // --- Planes guardados ---
        const renderSavedPlans = () => {
          savedPlansContainer.innerHTML = '';
          if (!savedPlans.length) {
            const emptyMessage = currentUser
              ? 'Aún no tienes planes guardados en la nube.'
              : 'Todavía no has guardado ningún plan.';
            savedPlansContainer.innerHTML = `<p class="text-sm text-slate-400">${emptyMessage}</p>`;
            return;
          }
          savedPlans.forEach((plan) => {
            const wrapper = document.createElement('div');
            wrapper.className = 'rounded-2xl border border-white/10 bg-white/5 p-4';
            wrapper.innerHTML = `
              <div class="flex items-center justify-between text-sm text-white">
                <p class="font-medium">${plan.name}</p>
                <div class="flex gap-2">
                  <button data-action="load" data-name="${encodeURIComponent(plan.name)}" class="inline-flex items-center justify-center rounded-full border border-white/15 bg-white/5 px-3 py-1 text-xs text-slate-200 transition hover:bg-white/10">Cargar</button>
                  <button data-action="delete" data-name="${encodeURIComponent(plan.name)}" class="inline-flex items-center justify-center rounded-full border border-white/15 bg-white/5 px-3 py-1 text-xs text-slate-200 transition hover:bg-white/10">Eliminar</button>
                </div>
              </div>`;
            savedPlansContainer.appendChild(wrapper);
          });
        };

        const persistPlans = () => {
          if (currentUser) return;
          localStorage.setItem(plansStorageKey, JSON.stringify(savedPlans));
        };

        const loadPlansFromLocalStorage = () => {
          try {
            const stored = JSON.parse(localStorage.getItem(plansStorageKey)) || [];
            return Array.isArray(stored) ? stored : [];
          } catch (error) {
            return [];
          }
        };

        const syncLocalPlansFromStorage = () => {
          if (currentUser) return;
          savedPlans = loadPlansFromLocalStorage();
          renderSavedPlans();
        };

        const showPlanMessage = (message, variant = 'error') => {
          planNameError.textContent = message;
          planNameError.classList.remove('hidden');
          if (variant === 'success') {
            planNameError.classList.remove('text-red-300');
            planNameError.classList.add('text-emerald-300');
          } else {
            planNameError.classList.remove('text-emerald-300');
            planNameError.classList.add('text-red-300');
          }
        };

        const clearPlanMessage = () => {
          planNameError.classList.add('hidden');
        };

        const savePlanLocally = (planName) => {
          const existingIndex = savedPlans.findIndex((plan) => plan.name === planName);
          const planData = { name: planName, ...lastGeneratedPlan };
          if (existingIndex >= 0) {
            savedPlans[existingIndex] = planData;
          } else {
            savedPlans.push(planData);
          }
          persistPlans();
          renderSavedPlans();
          showPlanMessage('Plan guardado en este dispositivo.', 'success');
          setTimeout(clearPlanMessage, 2500);
        };

        const handlePlanSave = async () => {
          const planName = (planNameInput.value || '').trim();
          if (!planName) {
            showPlanMessage('Por favor ingresa un nombre.');
            return;
          }
          if (!lastGeneratedPlan) {
            showPlanMessage('Genera un plan antes de guardarlo.');
            return;
          }
          clearPlanMessage();
          if (!currentUser) {
            savePlanLocally(planName);
            return;
          }
          try {
            await savePlanToDatabase(currentUser.id, planName, lastGeneratedPlan);
            const existingIndex = savedPlans.findIndex((plan) => plan.name === planName);
            const planData = { name: planName, ...lastGeneratedPlan };
            if (existingIndex >= 0) {
              savedPlans[existingIndex] = planData;
            } else {
              savedPlans.unshift(planData);
            }
            renderSavedPlans();
            showPlanMessage('Plan sincronizado en la nube.', 'success');
            setTimeout(clearPlanMessage, 2500);
          } catch (error) {
            console.error('Error al guardar el plan remoto', error);
            showPlanMessage('No pudimos guardar el plan en la nube. Intenta más tarde.');
          }
        };

        const handleSavedPlanAction = async (event) => {
          const button = event.target.closest('button[data-action]');
          if (!button) return;
          const action = button.dataset.action;
          const planName = decodeURIComponent(button.dataset.name || '');
          const planData = savedPlans.find((plan) => plan.name === planName);
          if (action === 'load' && planData) {
            const inputs = planData.inputs || {};
            fillFormInputs({
              ingresos: inputs.ingresos,
              gastos: inputs.gastos,
              metas: inputs.metas,
              horario: inputs.horarioDisponible,
              area: inputs.areaMejorar,
              caos: inputs.nivelCaos,
            });
            updatePlanOutputs(planData.outputs || {});
            lastGeneratedPlan = { inputs, outputs: planData.outputs || {} };
            planNameInput.value = planData.name;
            showPlanMessage('Plan cargado correctamente.', 'success');
            setTimeout(clearPlanMessage, 2500);
          }
          if (action === 'delete') {
            if (!currentUser) {
              savedPlans = savedPlans.filter((plan) => plan.name !== planName);
              persistPlans();
              renderSavedPlans();
              return;
            }
            try {
              await deletePlanFromDatabase(currentUser.id, planName);
              savedPlans = savedPlans.filter((plan) => plan.name !== planName);
              renderSavedPlans();
            } catch (error) {
              console.error('Error al eliminar el plan remoto', error);
              showPlanMessage('No pudimos eliminar el plan remoto. Intenta nuevamente.');
            }
          }
        };

        const attachPlanListeners = () => {
          if (planListenersReady) return;
          savePlanBtn.addEventListener('click', () => {
            handlePlanSave();
          });
          savedPlansContainer.addEventListener('click', (event) => {
            handleSavedPlanAction(event);
          });
          planListenersReady = true;
        };

        const initLocalStoragePlans = () => {
          syncLocalPlansFromStorage();
          attachPlanListeners();
        };

        // --- Persistencia remota ---
        const savePlanToDatabase = async (userId, planName, planData) => {
          if (!isSupabaseConfigured) {
            throw new Error('Configura tus credenciales de Supabase para guardar en la nube.');
          }
          const { error } = await supabase
            .from('plans')
            .upsert(
              {
                user_id: userId,
                name: planName,
                inputs_json: planData.inputs,
                outputs_json: planData.outputs,
              },
              { onConflict: 'user_id,name' }
            );
          if (error) throw error;
        };

        const loadPlansFromDatabase = async (userId) => {
          if (!isSupabaseConfigured) {
            throw new Error('Configura tus credenciales de Supabase para sincronizar planes.');
          }
          const { data, error } = await supabase
            .from('plans')
            .select('*')
            .eq('user_id', userId)
            .order('created_at', { ascending: false });
          if (error) throw error;
          return (data || []).map((item) => ({
            name: item.name,
            inputs: item.inputs_json || {},
            outputs: item.outputs_json || {},
          }));
        };

        const deletePlanFromDatabase = async (userId, planName) => {
          if (!isSupabaseConfigured) {
            throw new Error('Configura tus credenciales de Supabase para borrar planes.');
          }
          const { error } = await supabase
            .from('plans')
            .delete()
            .eq('user_id', userId)
            .eq('name', planName);
          if (error) throw error;
        };

        const initRemotePlans = async () => {
          if (!currentUser || !isSupabaseConfigured) return;
          try {
            savedPlans = await loadPlansFromDatabase(currentUser.id);
            renderSavedPlans();
          } catch (error) {
            console.error('Error al cargar planes remotos', error);
            showPlanMessage('No pudimos cargar tus planes remotos. Revisa tu conexión.');
          }
        };

        // --- Autenticación ---
        const setCurrentUser = (user) => {
          currentUser = user;
          if (user) {
            authTrigger.classList.add('hidden');
            logoutButton.classList.remove('hidden');
            authUserBadge.classList.remove('hidden');
            const username = (user.email || '').split('@')[0] || 'usuario';
            authEmailDisplay.textContent = username;
          } else {
            authTrigger.classList.remove('hidden');
            logoutButton.classList.add('hidden');
            authUserBadge.classList.add('hidden');
            authEmailDisplay.textContent = '';
          }
        };

        const setAuthMode = (mode) => {
          authMode = mode;
          authTabs.forEach((tab) => {
            const isActive = tab.dataset.authTab === mode;
            tab.classList.toggle('bg-white/10', isActive);
            tab.classList.toggle('text-white', isActive);
            tab.classList.toggle('text-slate-400', !isActive);
          });
          authSubmit.textContent = mode === 'login' ? 'Iniciar sesión' : 'Crear cuenta';
        };

        const resetAuthFeedback = () => {
          authError.classList.add('hidden');
          authSuccess.classList.add('hidden');
        };

        const openAuthModal = () => {
          authModalOverlay.classList.remove('hidden');
          updateBodyModalState();
          if (authEmail) {
            setTimeout(() => authEmail.focus(), 50);
          }
        };

        const closeAuthModal = () => {
          authModalOverlay.classList.add('hidden');
          authForm.reset();
          resetAuthFeedback();
          setAuthMode('login');
          updateBodyModalState();
        };

        const handleRegister = async (email, password) => {
          if (!isSupabaseConfigured) {
            throw new Error('Configura tus credenciales de Supabase para crear cuentas.');
          }
          const { error } = await supabase.auth.signUp({ email, password });
          if (error) throw error;
          authSuccess.textContent = 'Te enviamos un correo para confirmar tu cuenta (modo demo).';
          authSuccess.classList.remove('hidden');
        };

        const handleLogin = async (email, password) => {
          if (!isSupabaseConfigured) {
            throw new Error('Configura tus credenciales de Supabase para iniciar sesión.');
          }
          const { data, error } = await supabase.auth.signInWithPassword({ email, password });
          if (error) throw error;
          setCurrentUser(data.user);
          await initRemotePlans();
          authSuccess.textContent = 'Sesión iniciada. Sincronizando tus planes...';
          authSuccess.classList.remove('hidden');
          setTimeout(() => {
            closeAuthModal();
            showPlanMessage('Sesión iniciada correctamente.', 'success');
            setTimeout(clearPlanMessage, 2500);
          }, 800);
        };

        const handleLogout = async () => {
          try {
            if (isSupabaseConfigured) {
              await supabase.auth.signOut();
            }
          } catch (error) {
            console.error('Error al cerrar sesión', error);
          } finally {
            setCurrentUser(null);
            syncLocalPlansFromStorage();
            showPlanMessage('Sesión cerrada. Continúas en modo local.', 'success');
            setTimeout(clearPlanMessage, 2500);
          }
        };

        const getCurrentUserFromSupabase = async () => {
          if (!isSupabaseConfigured) {
            setCurrentUser(null);
            return;
          }
          try {
            const { data, error } = await supabase.auth.getUser();
            if (error) {
              setCurrentUser(null);
              syncLocalPlansFromStorage();
              return;
            }
            if (data?.user) {
              setCurrentUser(data.user);
              await initRemotePlans();
            } else {
              setCurrentUser(null);
              syncLocalPlansFromStorage();
            }
          } catch (error) {
            console.error('Error al obtener la sesión de Supabase', error);
            setCurrentUser(null);
            syncLocalPlansFromStorage();
          }
        };

        const initSupabaseAuth = () => {
          setAuthMode('login');
          authTrigger.addEventListener('click', () => openAuthModal());
          authClose.addEventListener('click', () => closeAuthModal());
          authCancel.addEventListener('click', () => closeAuthModal());
          authModalOverlay.addEventListener('click', (event) => {
            if (event.target === authModalOverlay) {
              closeAuthModal();
            }
          });
          authTabs.forEach((tab) => {
            tab.addEventListener('click', () => setAuthMode(tab.dataset.authTab));
          });
          authForm.addEventListener('submit', async (event) => {
            event.preventDefault();
            resetAuthFeedback();
            const email = authEmail.value.trim();
            const password = authPassword.value.trim();
            if (!email || !password) {
              authError.textContent = 'Completa correo y contraseña.';
              authError.classList.remove('hidden');
              return;
            }
            try {
              if (authMode === 'login') {
                await handleLogin(email, password);
              } else {
                await handleRegister(email, password);
              }
            } catch (error) {
              authError.textContent = error.message || 'Ocurrió un error al procesar tu solicitud.';
              authError.classList.remove('hidden');
            }
          });
          logoutButton.addEventListener('click', () => handleLogout());
          getCurrentUserFromSupabase();
          if (isSupabaseConfigured) {
            supabase.auth.onAuthStateChange((_event, session) => {
              const user = session?.user || null;
              setCurrentUser(user);
              if (user) {
                initRemotePlans();
              } else {
                syncLocalPlansFromStorage();
              }
            });
          }
        };

        // --- Modal lista de espera PRO ---
        const openWaitlistModal = () => {
          waitlistModal.classList.remove('hidden');
          updateBodyModalState();
        };

        const closeWaitlistModal = () => {
          waitlistModal.classList.add('hidden');
          waitlistMessage.textContent = '';
          updateBodyModalState();
        };

        const initProWaitlistModal = () => {
          openWaitlistBtn.addEventListener('click', () => openWaitlistModal());
          closeWaitlistBtn.addEventListener('click', () => closeWaitlistModal());
          waitlistCancelBtn.addEventListener('click', () => closeWaitlistModal());
          waitlistModal.addEventListener('click', (event) => {
            if (event.target === waitlistModal) {
              closeWaitlistModal();
            }
          });
          waitlistForm.addEventListener('submit', (event) => {
            event.preventDefault();
            const email = waitlistEmail.value.trim();
            if (!email || !email.includes('@')) {
              waitlistMessage.textContent = 'Ingresa un correo válido.';
              waitlistMessage.classList.remove('text-emerald-300');
              waitlistMessage.classList.add('text-red-300');
              return;
            }
            waitlistMessage.classList.remove('text-red-300');
            waitlistMessage.classList.add('text-emerald-300');
            try {
              const stored = JSON.parse(localStorage.getItem(waitlistStorageKey)) || [];
              stored.push({ email, date: new Date().toISOString() });
              localStorage.setItem(waitlistStorageKey, JSON.stringify(stored));
              waitlistMessage.textContent = 'Tu correo ha sido registrado en modo demo.';
              waitlistEmail.value = '';
            } catch (error) {
              waitlistMessage.textContent = 'No pudimos guardar tu correo, intenta más tarde.';
              waitlistMessage.classList.remove('text-emerald-300');
              waitlistMessage.classList.add('text-red-300');
            }
          });
        };

        // --- Inicialización ---
        const init = () => {
          initFooterYear();
          initSmoothScroll();
          initSectionAnimations();
          initMobileMenu();
          initFAQ();
          initTemplates();
          initFormPlan();
          initCopySummary();
          initLocalStoragePlans();
          initSupabaseAuth();
          initProWaitlistModal();
        };

        init();
      })();
    </script>
  </body>
</html>
